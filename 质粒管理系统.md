
### Mac 适配文件归档 (2026-02-08)
- **创建独立目录**: 创建了 `macversion/` 文件夹，用于集中存放所有 Mac 平台适配相关的配置文件和脚本，方便管理和查阅。
- **归档内容**:
    - `electron-builder.yml`: 包含 Mac 打包配置（Hardened Runtime, Entitlements 等）。
    - `build/`: 包含 entitlements 权限配置文件 (`entitlements.mac.plist`, `entitlements.mac.inherit.plist`)。
    - `convert-icon.js`: 图标生成脚本。
    - `icon.icns`: 生成的 Mac 专用图标。
    - `build-mac-check.yml`: Mac 自动构建工作流配置。
    - `MAC_PACKAGING_ANALYSIS.md`: Mac 打包问题分析文档。
- **涉及文件**: `macversion/` 目录及其下属文件, `质粒管理系统.md`。

### Mac 版本独立化与配置更新 (2026-02-08)
- **代码独立**: 将项目所有代码完整复制到 `macversion/` 目录，建立独立的 Mac 开发环境，避免与 Windows 版本 (`exe`) 相互干扰。
- **主进程逻辑适配 (`macversion/main.js`)**:
    - **图标适配**: 修改图标加载逻辑，Mac 平台优先使用 `assets/icon.icns`，其他平台保持使用 `assets/icon.png`。
    - **菜单栏处理**: 调整菜单栏隐藏逻辑，仅在非 Mac 平台 (`process.platform !== 'darwin'`) 且打包状态下隐藏菜单栏，符合 Mac 用户习惯。
- **打包配置优化 (`macversion/electron-builder.yml`)**:
    - 确认已配置 `hardenedRuntime: true` 以支持 Mac 安全校验。
    - 确认引用了 `build/entitlements.mac.plist` 等权限文件。
