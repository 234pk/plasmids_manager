### 设置页国际化与导出优化 (2026-02-07)
- **设置页面全翻译**:
    - 修复了设置模态框中多处硬编码的中文文本，实现了完整的国际化绑定。
    - 涵盖了“默认持有人”、“分页条数”、“排序顺序”、“空状态提示”以及搜索框占位符等 12+ 处 UI 元素的翻译。
    - 优化了分页控件的显示逻辑，支持中英文语法差异（如“第 X 到 Y 条”与 "Showing X to Y"）。
- **操作反馈增强**:
    - 为设置页面的“保存”按钮添加了 Toast 实时反馈，确保用户在保存配置后能获得明确的视觉确认。
- **数据导出优化**:
    - 解决了 CSV 导出时“项目”和“持有人”仅显示 ID 编号的问题。
    - 增强了 `downloadCSV` 函数，实现了从 ID 到名称的自动转换，确保导出的数据在共享和查阅时具备可读性。
- **涉及文件**: `index.html`, `js/app.js`, `js/translations_data.js`, `js/data-service.js`。

### 智能识别增强与 macOS 构建优化 (2026-02-07)
- **"新建质粒" 智能识别增强**:
    - 将单条质粒创建过程中的智能识别 UI 升级为与批量导入一致的**可选框预览**模式。
    - 增加了**手动添加 (+) 识别项**的功能，支持在单条创建时快速扩展属性。
    - 引入了**自动识别开关**，允许用户自主控制是否在输入名称时触发智能解析。
    - 实现了状态同步：勾选预览项后自动实时更新主表单字段。
- **macOS 构建兼容性修复**:
    - 将 `convert-icon.js` 生成的图标尺寸提升至 `1024x1024`，解决了 macOS 打包要求的最低 512x512 图标限制。
- **国际化与乱码修复**:
    - 彻底解决了 `gen_1611` (软件打开) 和 `gen_1612` (查看序列) 按钮在某些环境下可能出现的乱码问题。
    - 通过将这些核心按钮文本迁移到 i18n 的 `common` 命名空间并更新引用，确保了文本渲染的稳定性。
    - 完善了 `i18n.js` 中的通用文本对照表，支持中英文双语。
- **涉及文件**: `index.html`, `js/app.js`, `js/i18n.js`, `js/translations_data.js`, `convert-icon.js`。

### 批量导入 UI/UX 深度优化与国际化完善 (2026-02-07)
- **输入交互升级**:
    - 将 12 个关键质粒属性（如抗性、标签、启动子等）的文本输入框全面升级为**可勾选列表**。
    - 实现了**动态添加新值**功能，支持用户在界面上直接输入并扩展属性库，且具备自动去重逻辑。
    - 优化了数据保存逻辑：仅保留用户在列表中勾选的属性值进行持久化，避免无效数据干扰。
- **批量导入增强**:
    - 模态框宽度调整为 `98vw`，极大提升了长文件名在界面上的展示效果，支持自动换行。
    - 修复了 `t is not defined` 运行时错误，确保翻译函数在所有逻辑模块中均可用。
    - 实现了文件名与文件内容（GenBank 特征）的**交叉验证识别**，大幅提升了自动填充的准确性。
- **国际化 (i18n) 完整性**:
    - 移除了 `app.js` 中所有硬编码的中文引导内容，统一通过 i18n 翻译引擎驱动。
    - 完善了 `translations_data.js` 的中英文对照表，修复了部分文本中的冗余符号和格式错误。
    - 显式设置 HTML 脚本加载编码为 `UTF-8`，解决了 Windows 桌面版环境下可能出现的标题乱码问题。
- **工程化与分发**:
    - 配置了 GitHub Actions 工作流，实现了基于代码标签（Tag）触发的自动化跨平台构建发布流程。
    - 针对 macOS 增加了权限管理配置 (`entitlements`)，确保在 macOS 下的文件访问与运行兼容性。
- **涉及文件**: `index.html`, `js/app.js`, `js/batch-logic.js`, `js/recognition.js`, `js/translations_data.js`, `package.json`, `.github/workflows/release.yml`。

### UniProt 深度集成：物种过滤与数据增强
- **新增能力**:
  - 参考 Chrome 扩展逻辑，支持 Taxonomy ID 精确物种过滤（基于质粒“物种”字段）。
  - 实现 Reviewed (人工审阅) 优先、Unreviewed 兜底的搜索策略，提升结果相关性。
  - 新增提取细胞定位 (Subcellular Location)、RefSeq ID、STRING ID 等扩展信息。
- **影响范围**:
  - `js/services/uniprotService.js`（核心搜索逻辑重构、字段解析增强）
  - `js/app.js`（物种 ID 映射与传递）
  - `index.html`（模态框 UI 更新，展示扩展信息）

### 修复与优化 (2026-02-06)
- **修复**: 解决了 `plasmid.物种.trim is not a function` 运行时错误，增强了对非字符串（如数组）物种字段的兼容性。
- **优化**: 修正了 `index.html` 中的 HTML 验证错误（包括按钮类型缺失、标签嵌套不规范、未转义字符等），提升了代码质量和可访问性。
- **功能增强**: 优化了 UniProt 功能描述的显示规范。
  - 支持多条功能描述按列表显示（原为仅显示第一条）。
  - 自动解析并链接文献引用（如 `(PubMed:123456)` 转换为可点击链接）。
  - 新增 FlyBase ID 提取与显示（支持点击跳转到 FlyBase 报告页）。
  - 涉及文件: `js/services/uniprotService.js`, `index.html`, `package.json`。

### 打包运行与路径安全优化 (2026-02-06)
- **核心修复**: 解决了打包后的 `.exe` 无法打开（静默崩溃）的问题。
- **路径重定向**: 
  - 将数据库、设置和日志的存储路径从 `__dirname`（安装目录，通常只读且权限受限）重定向到 `app.getPath('userData')`（用户数据目录）。
  - 确保了程序在打包成 ASAR 后仍能正常进行文件读写操作。
- **自动迁移机制**:
  - 实现了从安装目录到用户数据目录的数据库迁移逻辑，确保用户更新版本后数据不丢失。
- **打包增强**:
  - 引入了 `sharp` 库替代 `svg2png`，解决了 Windows 环境下图标转换的兼容性报错。
  - 在 `main.js` 中优先使用生成的 `icon.png` 提升窗口图标加载的成功率。
- **涉及文件**: `main.js`, `package.json`, `convert-icon.js`。
- **自定义图标 (v4 设计 - 最终视觉增强)**: 
  - 根据用户提供的参考图进行了第四次重绘，实现了高度的视觉还原。
  - **视觉还原**: 模拟了参考图中的厚实蓝色质粒断裂环、交织的 DNA 双螺旋路径以及顶部的“电火花/断裂”细节。
  - **打包兼容性优化 (2026-02-06)**: 
    - 针对 `electron-builder` 在 Windows 上的 SVG 转换错误（`ERR_ELECTRON_BUILDER_CANNOT_EXECUTE`），简化了 `icon.svg` 结构。
    - 移除了导致转换崩溃的 `filter` 滤镜和复杂的 `tspan` 嵌套，改用扁平化路径实现视觉效果。
    - 优化了 `package.json` 的 `build` 配置，将图标声明精确限制在 `win` 平台段落内，以减少构建时的干扰。
- **集成应用**:
  - `main.js`: 设置 Electron 窗口图标，确保桌面任务栏及窗口标题栏显示图标。
  - `index.html`: 添加 Favicon 链接，提升应用在不同环境下的视觉一致性。
  - `package.json`: 更新打包配置，将新图标应用于生成的 `.exe` 安装程序和便携版。
- **涉及文件**: `assets/icon.svg`, `main.js`, `index.html`, `package.json`。
