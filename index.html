<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ë¥®Á≤íÁÆ°ÁêÜÁ≥ªÁªü</title>
    <link rel="icon" href="assets/icon.svg?v=2" type="image/svg+xml">
    <script src="js/lib/tailwind.min.js"></script>
    <script src="js/lib/vue.global.js"></script>
    <script src="js/lib/compromise.js"></script>
    <script src="js/translations_data.js" charset="utf-8"></script>
    <script src="js/i18n.js" charset="utf-8"></script>
    <script src="js/project-window.js" charset="utf-8"></script>
    <style>
        [v-cloak] { display: none !important; }
        .init-loader { position: fixed; inset: 0; background: #f9fafb; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 9999; }
        /* Hide loading layer after Vue mount (v-cloak removed) */
        [v-cloak] ~ .init-loader { display: flex !important; }
        #app:not([v-cloak]) ~ .init-loader { display: none !important; }
        #app:not([v-cloak]) + #init-loader { display: none !important; }
        
        .filter-tag { cursor: pointer; transition: all 0.2s; }
        .filter-tag:hover { opacity: 0.8; }
        .filter-tag.active { background-color: #3b82f6; color: white; }
        .drop-zone { border: 2px dashed #cbd5e1; transition: all 0.3s; }
        .drop-zone.dragging { border-color: #3b82f6; background-color: #eff6ff; }
        .modal-enter-active, .modal-leave-active { transition: opacity 0.3s; }
        .modal-enter-from, .modal-leave-to { opacity: 0; }
        
        /* UI Enhancement */
        .card-hover { transition: transform 0.2s, box-shadow 0.2s; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .btn-scale { transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1); }
        .btn-scale:active { transform: scale(0.95); opacity: 0.9; }
        .btn-scale:hover { filter: brightness(1.1); }
        .toolbar button,
        .toolbar label { height: 2.5rem; font-size: 0.875rem; border-radius: 0.5rem; }
        .table-base { border-collapse: separate; border-spacing: 0; }
        .density-compact th, .density-compact td { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .density-comfortable th, .density-comfortable td { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .badge { display: inline-flex; align-items: center; padding: 0.125rem 0.5rem; border-radius: 0.375rem; font-size: 0.625rem; font-weight: 700; }
        .badge-purple { background: #f3e8ff; color: #6b21a8; }
        .badge-green { background: #dcfce7; color: #166534; }
        .badge-blue { background: #dbeafe; color: #1d4ed8; }
        .badge-amber { background: #fef3c7; color: #92400e; }
        .badge-rose { background: #ffe4e6; color: #be123c; }
        .badge-slate { background: #f1f5f9; color: #475569; }
        
        /* Guide layer style */
        .guide-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); z-index: 1000; }
        .guide-box { position: relative; background: white; padding: 28px; border-radius: 20px; max-width: 400px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); z-index: 1001; }
        .highlight-target { position: relative; z-index: 1002 !important; box-shadow: 0 0 0 4px #3b82f6, 0 0 20px rgba(59, 130, 246, 0.5) !important; background: white !important; }
        
        /* Custom scrollbar - Enhanced visibility */
        ::-webkit-scrollbar { width: 16px; height: 16px; }
        ::-webkit-scrollbar-track { background: #e2e8f0; border-radius: 0; }
        ::-webkit-scrollbar-thumb { background: #64748b; border-radius: 8px; border: 3px solid #e2e8f0; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
        ::-webkit-scrollbar-corner { background: #e2e8f0; }

        /* Column width resize handle */
        .resizer {
            position: absolute;
            top: 0;
            right: 0;
            width: 5px;
            height: 100vh; /* Use 100vh to extend handle to full table height */
            max-height: 2000px; /* Prevent too high */
            cursor: col-resize;
            user-select: none;
            touch-action: none;
            z-index: 10;
            opacity: 0; /* Hidden by default */
        }
        .resizer:hover, .resizing {
            background-color: #3b82f6;
            opacity: 0.5;
            width: 8px; /* Widen when active */
            right: -4px; /* Centered display */
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="app" v-cloak class="min-w-full mx-auto px-4 sm:px-6 lg:px-8 py-6 relative z-10">
        <!-- User Guide Overlay -->
        <div v-if="showGuide" class="guide-overlay" @click.stop></div>
        <div v-if="showGuide" class="fixed inset-0 z-[1100] flex items-center justify-center pointer-events-none">
            <div class="guide-box pointer-events-auto shadow-2xl border border-blue-100">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800">{{ guideSteps[guideStep].title }}</h3>
                </div>
                <p class="text-gray-600 mb-8 leading-relaxed">{{ guideSteps[guideStep].content }}</p>
                <div class="flex justify-between items-center">
                    <button type="button" @click="skipGuide" class="text-sm font-medium text-gray-400 hover:text-gray-600 transition-colors">{{ t('gen_0015') }}</button>
                    <div class="flex gap-2">
                        <div v-for="(s, i) in guideSteps" :key="i" :class="['w-2 h-2 rounded-full transition-all', i === guideStep ? 'bg-blue-600 w-4' : 'bg-gray-200']"></div>
                    </div>
                    <div class="flex gap-3">
                        <button v-if="guideStep > 0" type="button" @click="prevGuide" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition-all font-bold">
                            {{ t('gen_0016') }}
                        </button>
                        <button type="button" @click="nextGuide" class="px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-200 font-bold btn-scale">
                            {{ guideStep === guideSteps.length - 1 ? t('gen_2000') : t('gen_2001') }}
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- New User Onboarding -->
        <div v-if="!isDatabaseReady" class="max-w-5xl mx-auto mt-20 px-4">
            <div class="bg-white rounded-3xl shadow-2xl p-12 text-center border border-gray-100">
                <div class="mb-12">
                    <h1 class="text-4xl font-extrabold text-slate-800 mb-4 tracking-tight">üß¨ {{ t('gen_0019') }}</h1>
                    <p class="text-slate-500 text-lg">{{ t('gen_0020') }}</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Import Database -->
                    <div 
                        @click="linkLocalDatabase"
                        @dragover.prevent="isDragging = true" 
                        @dragleave.prevent="isDragging = false" 
                        @drop.prevent="handleDrop"
                        :class="['group p-8 rounded-2xl border-2 border-dashed cursor-pointer transition-all duration-300 hover:-translate-y-2', isDragging ? 'border-blue-500 bg-blue-50' : 'border-slate-200 hover:border-blue-400 hover:bg-blue-50/50 hover:shadow-xl']"
                    >
                        <div class="w-20 h-20 bg-blue-100 text-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-sm group-hover:shadow-blue-200">
                            <svg class="w-10 h-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" /></svg>
                        </div>
                        <h3 class="text-xl font-bold text-slate-800 mb-3">{{ t('gen_0022') }}</h3>
                        <p class="text-sm text-slate-500 mb-6 leading-relaxed">{{ t('gen_0023') }}<br>{{ t('gen_0024') }}</p>
                        <button type="button" class="px-6 py-2.5 bg-white border border-blue-200 text-blue-600 rounded-xl text-sm font-bold group-hover:bg-blue-600 group-hover:text-white transition-all shadow-sm">{{ t('gen_0025') }}</button>
                    </div>

                    <!-- Create Sample DB -->
                    <div 
                        @click="loadSampleDatabase"
                        class="group p-8 rounded-2xl border-2 border-purple-100 bg-gradient-to-b from-purple-50/50 to-white cursor-pointer transition-all duration-300 hover:-translate-y-2 hover:border-purple-300 hover:shadow-xl relative overflow-hidden"
                    >
                        <div class="absolute top-0 right-0 bg-purple-500 text-white text-[10px] px-3 py-1.5 rounded-bl-xl font-bold tracking-wider shadow-sm">{{ t('gen_0027') }}</div>
                        <div class="w-20 h-20 bg-purple-100 text-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-sm group-hover:shadow-purple-200">
                            <svg class="w-10 h-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" /></svg>
                        </div>
                        <h3 class="text-xl font-bold text-slate-800 mb-3">{{ t('gen_0028') }}</h3>
                        <p class="text-sm text-slate-500 mb-6 leading-relaxed">{{ t('gen_0029') }}<br>{{ t('gen_0030') }}</p>
                        <button type="button" class="px-6 py-2.5 bg-purple-100 text-purple-700 rounded-xl text-sm font-bold group-hover:bg-purple-600 group-hover:text-white transition-all shadow-sm">{{ t('gen_0031') }}</button>
                    </div>

                    <!-- {{ t('gen_0032') }} -->
                    <div 
                        @click="startFromScratch"
                        class="group p-8 rounded-2xl border-2 border-slate-100 cursor-pointer transition-all duration-300 hover:-translate-y-2 hover:border-slate-300 hover:bg-slate-50 hover:shadow-xl"
                    >
                        <div class="w-20 h-20 bg-slate-100 text-slate-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-sm group-hover:shadow-slate-200">
                            <svg class="w-10 h-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>
                        </div>
                        <h3 class="text-xl font-bold text-slate-800 mb-3">{{ t('gen_0033') }}</h3>
                        <p class="text-sm text-slate-500 mb-6 leading-relaxed">{{ t('gen_0034') }}<br>{{ t('gen_0035') }}</p>
                        <button type="button" class="px-6 py-2.5 bg-white border border-slate-300 text-slate-600 rounded-xl text-sm font-bold group-hover:bg-slate-800 group-hover:text-white transition-all shadow-sm">{{ t('gen_0036') }}</button>
                    </div>
                </div>

                <!-- {{ t('gen_1601') }} -->
                <input 
                    type="file" 
                    id="db-file-input" 
                    class="hidden" 
                    accept=".json" 
                    @change="handleFileSelect"
                >
            </div>
            </div>
        

        <!-- {{ t('gen_1602') }} -->
        <main v-else :aria-label="t('gen_1602')">
            <header class="mb-8 flex justify-between items-center" :aria-label="t('gen_1603')">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">{{ t('nav.library') }}</h1>
                    <p class="text-gray-600 mt-2">
                        {{ t('common.all') }} {{ plasmids.length }} {{ t('common.records') }} | <span class="text-blue-600 font-medium">{{ t('common.filtered') }} {{ filteredPlasmids.length }} {{ t('common.records') }}</span>
                    </p>
                </div>
                <div class="flex flex-col sm:flex-row gap-4 items-center justify-between toolbar bg-white p-3 rounded-xl border border-gray-100 shadow-sm" role="toolbar" :aria-label="t('gen_1604')">
                    <!-- {{ t('gen_0039') }} -->
                    <div class="flex items-center gap-3">
                        <div class="relative">
                            <button type="button" id="btn-new-plasmid" @click="createNewPlasmid" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-md shadow-blue-200 flex items-center gap-2 transition-all btn-scale font-bold">
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>
                                {{ t('actions.newPlasmid') }}
                            </button>
                        </div>
                        <div class="relative">
                            <button type="button" id="btn-batch-import" @click="triggerBatchImport" class="px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 hover:border-gray-300 shadow-sm flex items-center gap-2 transition-all btn-scale font-medium">
                                <svg class="w-5 h-5 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
                                {{ t('actions.batchImport') }}
                            </button>
                        </div>
                        <div v-if="isElectron" class="relative">
                            <button type="button" @click="scanAndImportLocal" class="px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 hover:border-gray-300 shadow-sm flex items-center gap-2 transition-all btn-scale font-medium">
                                <svg class="w-5 h-5 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                                {{ t('actions.scanDirectory') }}
                            </button>
                        </div>
                    </div>

                    <!-- {{ t('gen_0040') }} -->
                    <div class="flex items-center gap-3">
                        <!-- {{ t('gen_1605') }} -->
                        <div class="relative group">
                            <button type="button" class="p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all" :title="t('gen_0042')" :aria-label="t('gen_0042')">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" /></svg>
                            </button>
                            <div class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 p-3">
                                <div class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 px-1">{{ t('gen_0043') }}</div>
                                <label v-for="(visible, col) in settings.displayConfig.columnVisibility" :key="col" class="flex items-center gap-3 px-2 py-1.5 hover:bg-gray-50 rounded-md cursor-pointer transition-colors">
                                    <input type="checkbox" v-model="settings.displayConfig.columnVisibility[col]" class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                                    <span class="text-sm text-gray-700">{{ col }}</span>
                                </label>
                                
                                <template v-if="isElectron">
                                    <div class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 px-1 mt-3 pt-2 border-t border-gray-100">{{ t('gen_0044') }}</div>
                                    <div class="flex items-center justify-between px-2 mb-1 bg-gray-50 rounded-lg p-1">
                                        <button type="button" @click="setZoom((settings.zoomLevel || 0) - 0.1)" class="w-8 h-6 flex items-center justify-center text-gray-500 hover:text-blue-600 hover:bg-white rounded shadow-sm transition-all text-lg leading-none pb-1" :aria-label="t('gen_0130')">-</button>
                                        <span class="text-xs text-gray-700 font-bold min-w-[3rem] text-center">{{ Math.round(((settings.zoomLevel || 0) + 1) * 100) }}%</span>
                                        <button type="button" @click="setZoom((settings.zoomLevel || 0) + 0.1)" class="w-8 h-6 flex items-center justify-center text-gray-500 hover:text-blue-600 hover:bg-white rounded shadow-sm transition-all text-lg leading-none pb-1" :aria-label="t('gen_0131')">+</button>
                                    </div>
                                    <button type="button" @click="setZoom(0)" class="w-full text-[10px] text-center text-gray-400 hover:text-blue-600 py-1 transition-colors">{{ t('gen_0045') }}</button>
                                </template>
                            </div>
                        </div>

                        <!-- Êï∞ÊçÆÂ∑•ÂÖ∑ -->
                        <div class="h-6 w-px bg-gray-200 mx-1"></div>
                        
                        <div class="flex items-center bg-gray-50 rounded-lg p-1 border border-gray-200">
                            <button type="button" @click="showExportModal = true" class="px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-blue-600 hover:bg-white rounded-md transition-all flex items-center gap-1">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2m3.293-7.707a1 1 0 011.414 0L9 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" /></svg>
                                {{ t('gen_0047') }}
                            </button>
                            <label class="px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-blue-600 hover:bg-white rounded-md transition-all flex items-center gap-1 cursor-pointer">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>
                                {{ t('gen_0048') }}
                                <input type="file" accept=".csv" class="hidden" @change="handleCSVImport">
                            </label>
                        </div>

                        <div class="h-6 w-px bg-gray-200 mx-1"></div>

                        <!-- Á≥ªÁªüÊìç‰Ωú -->
                        <button type="button" id="btn-save-db" @click="saveDatabaseFile" class="p-2 text-emerald-600 bg-emerald-50 hover:bg-emerald-100 rounded-lg transition-all" :title="dbFileHandle ? 'Áõ¥Êé•‰øùÂ≠òÊâÄÊúâÊï∞ÊçÆ' : '‰øùÂ≠òÂΩìÂâçÊâÄÊúâ‰ø°ÊÅØ'" aria-label="‰øùÂ≠òÊï∞ÊçÆÂ∫ì">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" /></svg>
                        </button>
                        <button type="button" id="btn-show-settings" @click="showSettingsModal = true" class="p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all" :title="t('gen_0052')" :aria-label="t('gen_0052')">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        </button>
                        
                        <!-- Êõ¥Â§öËèúÂçï (Log, DB Ops) -->
                        <div class="relative group">
                            <button type="button" class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all" aria-label="Êõ¥Â§öÊìç‰Ωú">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" /></svg>
                            </button>
                            <div class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 overflow-hidden">
                                <button type="button" id="btn-show-logs" @click="showLogModal = true" class="w-full text-left px-4 py-3 hover:bg-gray-50 text-sm text-gray-700 flex items-center gap-2">
                                    <svg class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                                    {{ t('gen_0055') }}
                                </button>
                                <div class="h-px bg-gray-100 my-0"></div>
                                <button type="button" @click="createNewDatabase" class="w-full text-left px-4 py-3 hover:bg-gray-50 text-sm text-gray-700 flex items-center gap-2">
                                    <svg class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
                                    {{ t('gen_0056') }}
                                </button>
                                <button type="button" @click="switchDatabase" class="w-full text-left px-4 py-3 hover:bg-gray-50 text-sm text-gray-700 flex items-center gap-2">
                                    <svg class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" /></svg>
                                    {{ t('gen_0057') }}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- ËßÜÂõæÂàáÊç¢Ê†áÁ≠æÈ°µ -->
            <nav class="flex border-b border-gray-200 mb-6" aria-label="ËßÜÂõæÂàáÊç¢">
                <button type="button"
                    @click="currentView = 'library'"
                    id="btn-view-library"
                    :class="['px-6 py-3 font-bold text-sm transition-colors border-b-2', currentView === 'library' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700']"
                    aria-label="Êü•ÁúãË¥®Á≤íÂ∫ì"
                >
                    {{ t('gen_0059') }}
                </button>
                <button type="button"
                    @click="currentView = 'projects'"
                    id="btn-view-projects"
                    :class="['px-6 py-3 font-bold text-sm transition-colors border-b-2', currentView === 'projects' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700']"
                    aria-label="Êü•ÁúãÈ°πÁõÆÂàóË°®"
                >
                    {{ t('gen_0060') }}
                </button>
                <button type="button"
                    @click="currentView = 'holders'"
                    id="btn-view-holders"
                    :class="['px-6 py-3 font-bold text-sm transition-colors border-b-2', currentView === 'holders' ? 'border-amber-500 text-amber-600' : 'border-transparent text-gray-500 hover:text-gray-700']"
                    aria-label="Êü•ÁúãÊåÅÊúâ‰∫∫ÂàóË°®"
                >
                    {{ t('gen_0061') }}
                </button>
            </nav>

            <!-- {{ t('gen_0062') }} Ë¥®Á≤íÂ∫ì„ÄÅÈ°πÁõÆ„ÄÅÊåÅÊúâ‰∫∫) -->
            <div v-show="['library', 'projects', 'holders'].includes(currentView)">
            <div class="flex flex-col lg:flex-row gap-6 items-start">
                    <!-- È°πÁõÆÂàóË°® -->
                    <aside v-if="currentView === 'projects'" class="w-full lg:w-72 flex-shrink-0 space-y-4" aria-labelledby="projects-aside-title">
                        <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden">
                            <div class="p-4 bg-purple-50 border-b border-purple-100 flex justify-between items-center">
                                <h3 id="projects-aside-title" class="font-bold text-purple-700 text-sm flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>
                                    {{ t('gen_0067') }}
                                </h3>
                                <button type="button" @click="openCreateProject" class="p-1 bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors" :aria-label="t('gen_0261')">
                                    <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
                                </button>
                            </div>
                            <div class="p-2 max-h-[60vh] overflow-y-auto">
                                <div v-for="proj in projects" :key="proj.id" 
                                     @click="selectedProjectId = proj.id"
                                     :class="['p-3 rounded-lg cursor-pointer mb-1 transition-all flex justify-between items-center group', selectedProjectId === proj.id ? 'bg-purple-600 text-white shadow-md' : 'hover:bg-purple-50 text-gray-700']">
                                    <div class="min-w-0 flex-1">
                                        <div class="font-bold text-sm truncate">{{ proj.name }}</div>
                                        <div :class="['text-[10px]', selectedProjectId === proj.id ? 'text-purple-100' : 'text-gray-400']">{{ (proj.plasmidIds || []).length }} {{ t('gen_0069') }}</div>
                                    </div>
                                    <div class="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                        <button type="button" @click.stop="openEditProject(proj)" class="p-1 hover:bg-white/20 rounded" aria-label="ÁºñËæëÈ°πÁõÆ"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg></button>
                                        <button type="button" @click.stop="removeProject(proj)" class="p-1 hover:bg-red-500 hover:text-white rounded text-red-500 transition-colors" aria-label="Âà†Èô§È°πÁõÆ"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-4v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg></button>
                                    </div>
                                </div>
                                <div v-if="projects.length === 0" class="text-center py-8 text-gray-400 text-xs italic">{{ t('gen_0072') }}</div>
                            </div>
                        </div>
                    </aside>

                    <aside v-if="currentView === 'holders'" class="w-full lg:w-72 flex-shrink-0 space-y-4" aria-labelledby="holders-aside-title">
                        <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden">
                            <div class="p-4 bg-amber-50 border-b border-amber-100 flex justify-between items-center">
                                <h3 id="holders-aside-title" class="font-bold text-amber-700 text-sm flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                                    {{ t('gen_0074') }}
                                </h3>
                                <button type="button" @click="createHolder" class="p-1 bg-amber-500 text-white rounded hover:bg-amber-600 transition-colors" aria-label="Êñ∞Âª∫ÊåÅÊúâ‰∫∫">
                                    <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
                                </button>
                            </div>
                            <div class="p-2 max-h-[60vh] overflow-y-auto">
                                <div v-for="holder in uniqueHolders" :key="holder" 
                                     @click="selectedHolder = holder"
                                     :class="['p-3 rounded-lg cursor-pointer mb-1 transition-all flex justify-between items-center group', selectedHolder === holder ? 'bg-amber-500 text-white shadow-md' : 'hover:bg-amber-50 text-gray-700']">
                                    <div class="flex items-center gap-3 min-w-0">
                                        <div :class="['w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs flex-shrink-0', selectedHolder === holder ? 'bg-white/20' : 'bg-amber-100 text-amber-600']">
                                            {{ holder.charAt(0).toUpperCase() }}
                                        </div>
                                        <div class="font-bold text-sm truncate">{{ holder }}</div>
            </div>
            <div class="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2">
                <button type="button" @click.stop="deleteHolder(holder)" class="p-1 hover:bg-red-500 hover:text-white rounded text-red-500 transition-colors" aria-label="Âà†Èô§ÊåÅÊúâ‰∫∫"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-4v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg></button>
            </div>
        </div>
                                <div v-if="uniqueHolders.length === 0" class="text-center py-8 text-gray-400 text-xs italic">{{ t('gen_0077') }}</div>
                            </div>
                        </div>
                    </aside>

                    <!-- {{ t('gen_0078') }} -->
                    <div class="flex-1">
                        <!-- È°∂ÈÉ®ÊêúÁ¥¢ÂíåÂÖ®Â±ÄËÆæÁΩÆ -->
                        <div id="section-search" class="bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-100">
                            <div class="flex flex-col md:flex-row gap-6 mb-6">
                                <div class="flex-1 relative">
                                    <div class="flex items-center justify-between gap-2 mb-2">
                                        <label for="search-input" class="text-sm font-bold text-gray-700 flex items-center gap-2 cursor-pointer">
                                            <svg class="w-4 h-4 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                                            {{ currentView === 'library' ? 'Ê∑±Â∫¶ÂÖ®Â±ÄÊêúÁ¥¢' : (currentView === 'projects' ? 'Âú®ÂΩìÂâçÈ°πÁõÆ‰∏≠ÊêúÁ¥¢' : 'ÊêúÁ¥¢ÊåÅÊúâ‰∫∫ÁöÑË¥®Á≤í') }}
                                        </label>
                                        <div class="flex items-center gap-2">
                                            <div v-if="currentView === 'projects' && selectedProjectId">
                                                <button type="button" @click="clearProjectPlasmids(selectedProjectId)" class="text-xs text-red-500 hover:text-red-700 hover:underline px-2 py-1 bg-red-50 rounded border border-red-100 transition-colors" :title="t('gen_0082')">
                                                    {{ t('gen_0083') }}
                                                </button>
                                            </div>
                                            <div v-if="currentView === 'holders' && selectedHolder">
                                                <button type="button" @click="clearHolderPlasmids(selectedHolder)" class="text-xs text-red-500 hover:text-red-700 hover:underline px-2 py-1 bg-red-50 rounded border border-red-100 transition-colors" :title="t('gen_0084')">
                                                    {{ t('gen_0085') }}
                                                </button>
                                            </div>
                                            <button type="button" v-if="searchQuery" @click="searchQuery = ''" class="text-gray-400 hover:text-gray-600 transition-colors" aria-label="Ê∏ÖÁ©∫ÊêúÁ¥¢">
                                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                                            </button>
                                        </div>
                                    </div>
                                    <input id="search-input" v-model="searchQuery" type="text" placeholder="ËæìÂÖ•‰ªª‰ΩïÂÖ≥ÈîÆËØç..." class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all shadow-sm" aria-label="ÊêúÁ¥¢Ê°Ü">
                                </div>
                                <div class="w-48">
                                    <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0088') }}</label>
                                    <select v-model="pageSize" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all shadow-sm">
                                        <option :value="10">10 Êù°</option>
                                        <option :value="20">20 Êù°</option>
                                        <option :value="50">50 Êù°</option>
                                        <option :value="100">100 Êù°</option>
                                        <option :value="-1">{{ t('gen_0089') }}</option>
                                    </select>
                                </div>
                                <div class="w-48">
                                    <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0090') }}</label>
                                    <div class="flex bg-gray-100 p-1 rounded-lg">
                                        <button type="button" @click="settings.displayConfig.tableDensity = 'compact'" :class="['flex-1 px-3 py-2 text-xs font-bold rounded-md transition-all', settings.displayConfig.tableDensity === 'compact' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700']">{{ t('gen_0091') }}</button>
                                        <button type="button" @click="settings.displayConfig.tableDensity = 'comfortable'" :class="['flex-1 px-3 py-2 text-xs font-bold rounded-md transition-all', settings.displayConfig.tableDensity !== 'compact' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700']">{{ t('gen_0092') }}</button>
                                    </div>
                                </div>
                                <div class="w-48">
                                    <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0093') }}</label>
                                    <select v-model="sortConfig.key" @change="sortConfig.order = 'desc'" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all shadow-sm">
                                        <option value="Ê∑ªÂä†Êó∂Èó¥">{{ t('gen_0095') }}</option>
                                        <option value="Êõ¥Êñ∞Êó∂Èó¥">{{ t('gen_0097') }}</option>
                                        <option value="Êñá‰ª∂Âêç">{{ t('gen_0099') }}</option>
                                    </select>
                                </div>
                                <div class="w-24">
                                    <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0100') }}</label>
                                    <button type="button" @click="sortConfig.order = sortConfig.order === 'asc' ? 'desc' : 'asc'" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all shadow-sm bg-white text-gray-700 font-bold flex items-center justify-center gap-2">
                                        {{ sortConfig.order === 'asc' ? 'ÂçáÂ∫è' : 'ÈôçÂ∫è' }}
                                        <svg v-if="sortConfig.order === 'asc'" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12" /></svg>
                                        <svg v-else class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h5m4 0v12m0 0l-4-4m4 4l4-4" /></svg>
                                    </button>
                                </div>
                            </div>

                            <!-- ‰ªÖÂú®Ë¥®Á≤íÂ∫ìËßÜÂõæÊòæÁ§∫È´òÁ∫ßÁ≠õÈÄâ -->
                            <template v-if="currentView === 'library'">
                                <div class="flex items-center justify-between pt-4 border-t border-gray-50 mb-4">
                                    <div class="flex items-center gap-4">
                                        <span class="text-xs font-bold text-gray-500 uppercase tracking-wider">{{ t('gen_0103') }}</span>
                                        <div class="flex bg-gray-100 p-1 rounded-lg">
                                            <button type="button" @click="filterLogic = 'AND'" :class="['px-3 py-1 text-[10px] font-bold rounded-md transition-all', filterLogic === 'AND' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700']">{{ t('gen_0104') }}</button>
                                            <button type="button" @click="filterLogic = 'OR'" :class="['px-3 py-1 text-[10px] font-bold rounded-md transition-all', filterLogic === 'OR' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700']">{{ t('gen_0105') }}</button>
                                        </div>
                                    </div>
                                    <button type="button" v-if="hasActiveFilters" @click="clearAllFilters" class="text-[10px] font-bold text-red-500 hover:text-red-700 flex items-center gap-1 transition-colors">
                                        <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-4v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                                        {{ t('gen_0106') }}
                                    </button>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-8 gap-4">
                                    <div v-for="(options, key) in filterOptions" :key="key" class="min-w-0">
                                        <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2 truncate">{{ key }}</label>
                                        <div class="flex flex-wrap gap-1 max-h-24 overflow-y-auto pr-1 scrollbar-thin">
                                            <span v-for="option in options" :key="option" @click="toggleFilter(key, option)"
                                                :class="['px-1.5 py-0.5 text-[10px] rounded border cursor-pointer transition-all whitespace-nowrap', isFilterActive(key, option) ? 'active bg-blue-600 text-white border-blue-600 shadow-sm' : 'bg-white text-gray-500 border-gray-100 hover:border-blue-200']">
                                                {{ option }}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </template>

                            <!-- {{ t('gen_0107') }} -->
                            <div v-else class="flex items-center gap-3 pt-4 border-t border-gray-50">
                                <span class="text-xs font-bold text-gray-500 uppercase tracking-wider">{{ t('gen_0108') }}</span>
                                <div v-if="currentView === 'projects' && selectedProjectId" class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-bold flex items-center gap-2">
                                    {{ t('gen_0109') }} {{ getProjectNameById(selectedProjectId) }}
                                    <button type="button" @click="selectedProjectId = null" class="hover:text-purple-900">√ó</button>
                                </div>
                                <div v-else-if="currentView === 'holders' && selectedHolder" class="px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-bold flex items-center gap-2">
                                    {{ t('gen_0110') }} {{ selectedHolder }}
                                    <button type="button" @click="selectedHolder = null" class="hover:text-amber-900">√ó</button>
                                </div>
                                <div v-else class="text-xs text-gray-400 italic">ËØ∑‰ªéÂ∑¶‰æßÈÄâÊã©‰∏Ä‰∏™{{ currentView === 'projects' ? 'È°πÁõÆ' : 'ÊåÅÊúâ‰∫∫' }}ËøõË°åÊü•Áúã</div>
                            </div>
                        </div>

                        <!-- Êï∞ÊçÆË°®Ê†º -->
                        <div class="bg-white rounded-xl shadow-lg border border-gray-100 min-w-full w-fit">
                <div class="pb-3" :class="tableDensityClass">
                    <div class="">
                    <table class="min-w-full w-max divide-y divide-slate-200 table-base">
                        <thead class="bg-slate-50 text-[11px] text-slate-500 uppercase font-bold tracking-wider">
                            <tr>
                                <th class="px-6 py-4 text-center w-12 whitespace-nowrap relative group">
                                    <input type="checkbox" :checked="filteredPlasmids.length > 0 && selectedPlasmids.size === filteredPlasmids.length" @change="selectAll" class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                                </th>
                                <th v-if="settings.displayConfig.columnVisibility['Ë¥®Á≤í‰ø°ÊÅØ']" class="px-6 py-4 text-left whitespace-nowrap relative group" :style="getColumnWidth('Ë¥®Á≤í‰ø°ÊÅØ')">
                                    {{ t('gen_0116') }}
                                    <div class="resizer" @mousedown.stop.prevent="initResize($event)"></div>
                                </th>
                                <th v-if="settings.displayConfig.columnVisibility['ÁâπÂæÅ‰∏éÂàÜÁ±ª']" class="px-6 py-4 text-left whitespace-nowrap relative group" :style="getColumnWidth('ÁâπÂæÅ‰∏éÂàÜÁ±ª')">
                                    {{ t('gen_0118') }}
                                    <div class="resizer" @mousedown.stop.prevent="initResize($event)"></div>
                                </th>
                                <th v-if="settings.displayConfig.columnVisibility['ÊäóÊÄß']" class="px-6 py-4 text-left whitespace-nowrap relative group" :style="getColumnWidth('ÊäóÊÄß & ËØ±ÂØº')">
                                    {{ t('gen_0121') }}
                                    <div class="resizer" @mousedown.stop.prevent="initResize($event)"></div>
                                </th>
                                <th v-if="settings.displayConfig.columnVisibility['‰∏ì‰∏öÁâπÂæÅ']" class="px-6 py-4 text-left whitespace-nowrap relative group" :style="getColumnWidth('‰∏ì‰∏öÁâπÂæÅ')">
                                    {{ t('gen_0123') }}
                                    <div class="resizer" @mousedown.stop.prevent="initResize($event)"></div>
                                </th>
                                <th v-if="settings.displayConfig.columnVisibility['‰øùÂ≠ò‰ΩçÁΩÆ'] || settings.displayConfig.columnVisibility['ÊåÅÊúâ‰∫∫'] || settings.displayConfig.columnVisibility['È°πÁõÆ']" class="px-6 py-4 text-left whitespace-nowrap relative group" :style="getColumnWidth('Â≠òÂÇ®‰ø°ÊÅØ')">
                                    {{ t('gen_0126') }}
                                    <div class="resizer" @mousedown.stop.prevent="initResize($event)"></div>
                                </th>
                                <th v-if="settings.displayConfig.columnVisibility['Êó∂Èó¥‰ø°ÊÅØ']" class="px-6 py-4 text-left whitespace-nowrap relative group" :style="getColumnWidth('Êó∂Èó¥‰ø°ÊÅØ')">
                                    {{ t('gen_0128') }}
                                    <div class="resizer" @mousedown.stop.prevent="initResize($event)"></div>
                                </th>
                                <th v-if="settings.displayConfig.columnVisibility['Â∫èÂàó‰ø°ÊÅØ']" class="px-6 py-4 text-left whitespace-nowrap relative group" :style="getColumnWidth('Â∫èÂàó‰ø°ÊÅØ')">
                                    {{ t('gen_0130') }}
                                    <div class="resizer" @mousedown.stop.prevent="initResize($event)"></div>
                                </th>
                                <th v-if="settings.displayConfig.columnVisibility['ÊèèËø∞']" class="px-6 py-4 text-left whitespace-nowrap relative group" :style="getColumnWidth('ÊèèËø∞')">
                                    {{ t('gen_0132') }}
                                    <div class="resizer" @mousedown.stop.prevent="initResize($event)"></div>
                                </th>
                                <th class="px-4 py-4 text-center w-28 whitespace-nowrap">{{ t('gen_0133') }}</th>
                            </tr>
                        </thead>
                        <tbody id="main-table-body" class="divide-y divide-gray-100">
                            <tr v-for="(p, index) in paginatedPlasmids" :key="p.Êñá‰ª∂Âêç" class="hover:bg-blue-50/30 transition-colors group">
                                <td class="px-6 py-5 text-center">
                                    <input type="checkbox" :checked="selectedPlasmids.has(p.id)" @click="toggleSelection(p, $event)" class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                                </td>
                                <td v-if="settings.displayConfig.columnVisibility['Ë¥®Á≤í‰ø°ÊÅØ']" class="px-6 py-5">
                                    <div class="text-sm font-bold text-gray-900 group-hover:text-blue-600 transition-colors">
                                        {{ Array.isArray(p.Êñá‰ª∂Âêç) ? p.Êñá‰ª∂Âêç.filter(Boolean).join(', ') : p.Êñá‰ª∂Âêç }}
                                    </div>
                                    <div class="mt-1.5">
                                        <a href="#" @click.prevent="openFolder(p.Ë∑ØÂæÑ)" class="text-[11px] text-gray-400 hover:text-blue-600 hover:underline truncate max-w-[220px] block transition-colors" :title="t('gen_1606') + p.Ë∑ØÂæÑ" :aria-label="t('gen_1606') + p.Ë∑ØÂæÑ">
                                            {{ Array.isArray(p.Ë∑ØÂæÑ) ? p.Ë∑ØÂæÑ.filter(Boolean).join(', ') : p.Ë∑ØÂæÑ }}
                                        </a>
                                    </div>
                                </td>
                                <td v-if="settings.displayConfig.columnVisibility['ÁâπÂæÅ‰∏éÂàÜÁ±ª']" class="px-6 py-5">
                                    <div class="flex flex-wrap gap-1.5 mb-2">
                                        <template v-if="Array.isArray(p.ËΩΩ‰ΩìÁ±ªÂûã)">
                                            <span v-for="tag in p.ËΩΩ‰ΩìÁ±ªÂûã" :key="tag" class="badge badge-purple">{{ tag }}</span>
                                        </template>
                                        <span v-else-if="p.ËΩΩ‰ΩìÁ±ªÂûã" class="badge badge-purple">{{ p.ËΩΩ‰ΩìÁ±ªÂûã }}</span>
                                        <template v-if="Array.isArray(p.Áâ©Áßç)">
                                            <span v-for="tag in p.Áâ©Áßç" :key="tag" class="badge badge-green">{{ tag }}</span>
                                        </template>
                                        <span v-else-if="p.Áâ©Áßç" class="badge badge-green">{{ p.Áâ©Áßç }}</span>
                                    </div>
                                    <div class="text-xs flex flex-wrap items-center gap-1.5">
                                        <span class="font-bold text-gray-700">{{ t('gen_0151') }}</span>
                                        <span class="text-gray-900 font-medium">{{ Array.isArray(p.Èù∂Âü∫Âõ†) ? p.Èù∂Âü∫Âõ†.join(',') : p.Èù∂Âü∫Âõ† }}</span>
                                        <div v-if="p.Èù∂Âü∫Âõ† && p.Èù∂Âü∫Âõ† !== 'Êó†' && p.Èù∂Âü∫Âõ†.length" class="flex gap-1">
                                            <template v-for="link in getBioLinks(p.Èù∂Âü∫Âõ†, p.Áâ©Áßç)" :key="link.name">
                                                <div class="flex items-center gap-0.5 group">
                                                    <a href="#" @click.prevent="openUniProtModal(link.name, p)" class="w-4 h-4 flex items-center justify-center bg-blue-50 text-blue-600 text-[9px] font-black rounded hover:bg-blue-600 hover:text-white transition-all border border-blue-100" :title="t('gen_1607')" :aria-label="t('gen_1110')">U</a>
                                                    <a href="#" @click.prevent="openExternalLink(link.ncbi)" class="w-4 h-4 flex items-center justify-center bg-green-50 text-green-600 text-[9px] font-black rounded hover:bg-green-600 hover:text-white transition-all border border-green-100" :title="t('gen_1608')" :aria-label="t('gen_1111')">N</a>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                    <div class="text-[10px] text-gray-500 mt-0.5">
                                        <span class="font-medium text-gray-400">{{ t('gen_0159') }}</span> {{ Array.isArray(p.ÂäüËÉΩ) ? p.ÂäüËÉΩ.join(',') : p.ÂäüËÉΩ }}
                                    </div>
                                </td>
                                <td v-if="settings.displayConfig.columnVisibility['ÊäóÊÄß']" class="px-6 py-5 text-xs">
                                    <div class="flex flex-col gap-1">
                                        <div v-if="p.Â§ßËÇ†ÊùÜËèåÊäóÊÄß && p.Â§ßËÇ†ÊùÜËèåÊäóÊÄß.length" class="flex items-center gap-1">
                                            <span class="w-1.5 h-1.5 rounded-full bg-orange-400"></span>
                                            <span class="text-gray-600">E.coli: {{ Array.isArray(p.Â§ßËÇ†ÊùÜËèåÊäóÊÄß) ? p.Â§ßËÇ†ÊùÜËèåÊäóÊÄß.join(',') : p.Â§ßËÇ†ÊùÜËèåÊäóÊÄß }}</span>
                                        </div>
                                        <div v-if="p.Âì∫‰π≥Âä®Áâ©ÊäóÊÄß && p.Âì∫‰π≥Âä®Áâ©ÊäóÊÄß.length" class="flex items-center gap-1">
                                            <span class="w-1.5 h-1.5 rounded-full bg-blue-400"></span>
                                            <span class="text-gray-600">Mammal: {{ Array.isArray(p.Âì∫‰π≥Âä®Áâ©ÊäóÊÄß) ? p.Âì∫‰π≥Âä®Áâ©ÊäóÊÄß.join(',') : p.Âì∫‰π≥Âä®Áâ©ÊäóÊÄß }}</span>
                                        </div>
                                        <div v-if="p.ÂõõÁéØÁ¥†ËØ±ÂØº && p.ÂõõÁéØÁ¥†ËØ±ÂØº.length" class="flex items-center gap-1">
                                            <span class="w-1.5 h-1.5 rounded-full bg-red-400"></span>
                                            <span class="text-gray-600">Tet: {{ Array.isArray(p.ÂõõÁéØÁ¥†ËØ±ÂØº) ? p.ÂõõÁéØÁ¥†ËØ±ÂØº.join(',') : p.ÂõõÁéØÁ¥†ËØ±ÂØº }}</span>
                                        </div>
                                    </div>
                                </td>
                                <td v-if="settings.displayConfig.columnVisibility['‰∏ì‰∏öÁâπÂæÅ']" class="px-6 py-5 text-[11px]">
                                    <div class="space-y-1">
                                        <div v-if="p.ÊèíÂÖ•Á±ªÂûã && p.ÊèíÂÖ•Á±ªÂûã.length"><span class="font-bold text-gray-500">{{ t('gen_0174') }}</span> {{ Array.isArray(p.ÊèíÂÖ•Á±ªÂûã) ? p.ÊèíÂÖ•Á±ªÂûã.join(',') : p.ÊèíÂÖ•Á±ªÂûã }}</div>
                                        <div v-if="p.ËõãÁôΩÊ†áÁ≠æ && p.ËõãÁôΩÊ†áÁ≠æ.length"><span class="font-bold text-gray-500">{{ t('gen_0178') }}</span> {{ Array.isArray(p.ËõãÁôΩÊ†áÁ≠æ) ? p.ËõãÁôΩÊ†áÁ≠æ.join(',') : p.ËõãÁôΩÊ†áÁ≠æ }}</div>
                                        <div v-if="p.ËçßÂÖâËõãÁôΩ && p.ËçßÂÖâËõãÁôΩ.length"><span class="font-bold text-gray-500">{{ t('gen_0182') }}</span> {{ Array.isArray(p.ËçßÂÖâËõãÁôΩ) ? p.ËçßÂÖâËõãÁôΩ.join(',') : p.ËçßÂÖâËõãÁôΩ }}</div>
                                        <div v-if="p.ÂêØÂä®Â≠ê && p.ÂêØÂä®Â≠ê.length"><span class="font-bold text-gray-500">{{ t('gen_0186') }}</span> {{ Array.isArray(p.ÂêØÂä®Â≠ê) ? p.ÂêØÂä®Â≠ê.join(',') : p.ÂêØÂä®Â≠ê }}</div>
                                        <div v-if="p.Á™ÅÂèò && p.Á™ÅÂèò.length"><span class="font-bold text-red-500">{{ t('gen_0190') }}</span> {{ Array.isArray(p.Á™ÅÂèò) ? p.Á™ÅÂèò.join(',') : p.Á™ÅÂèò }}</div>
                                    </div>
                                </td>
                                <td v-if="settings.displayConfig.columnVisibility['‰øùÂ≠ò‰ΩçÁΩÆ'] || settings.displayConfig.columnVisibility['ÊåÅÊúâ‰∫∫'] || settings.displayConfig.columnVisibility['È°πÁõÆ']" class="px-6 py-5">
                                    <div class="flex flex-col gap-2">
                                        <div v-if="settings.displayConfig.columnVisibility['‰øùÂ≠ò‰ΩçÁΩÆ']" class="flex items-center gap-2">
                                            <span class="text-[10px] font-bold text-gray-400 w-8">{{ t('gen_0195') }}</span>
                                            <div class="text-xs text-gray-700 font-mono bg-gray-50 px-2 py-1 rounded border border-gray-100 inline-block cursor-pointer hover:bg-gray-100 hover:text-blue-600 hover:border-blue-200 transition-all" 
                                                 @click="handleQuickFilter('location', p.‰øùÂ≠ò‰ΩçÁΩÆ)" 
                                                 :title="t('gen_1609')">
                                                {{ p.‰øùÂ≠ò‰ΩçÁΩÆ || '-' }}
                                            </div>
                                        </div>
                                        <div v-if="settings.displayConfig.columnVisibility['ÊåÅÊúâ‰∫∫']" class="flex items-center gap-2">
                                            <span class="text-[10px] font-bold text-gray-400 w-8">{{ t('gen_0200') }}</span>
                                            <div class="flex items-center gap-1.5 cursor-pointer hover:opacity-80 transition-all" 
                                                 @click="handleQuickFilter('holder', p.ÊåÅÊúâ‰∫∫)"
                                                 :title="t('gen_1610')">
                                                <div class="w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-[10px] font-bold">
                                                    {{ (p.ÊåÅÊúâ‰∫∫ || 'Êó†').charAt(0).toUpperCase() }}
                                                </div>
                                                <span class="text-xs text-gray-700 hover:text-blue-600 hover:underline">{{ p.ÊåÅÊúâ‰∫∫ || '-' }}</span>
                                            </div>
                                        </div>
                                        <div v-if="settings.displayConfig.columnVisibility['È°πÁõÆ']" class="flex items-center gap-2">
                                            <span class="text-[10px] font-bold text-gray-400 w-8">{{ t('gen_0206') }}</span>
                                            <div class="text-xs text-gray-700 font-medium">
                                                <template v-if="p.È°πÁõÆ && p.È°πÁõÆ.length">
                                                    <span v-for="(pid, idx) in p.È°πÁõÆ" :key="pid" 
                                                          class="cursor-pointer hover:text-blue-600 hover:underline"
                                                          @click="handleQuickFilter('project', pid)">
                                                        {{ getProjectNameById(pid) }}{{ idx !== p.È°πÁõÆ.length - 1 ? ', ' : '' }}
                                                    </span>
                                                </template>
                                                <span v-else>-</span>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td v-if="settings.displayConfig.columnVisibility['Êó∂Èó¥‰ø°ÊÅØ']" class="px-6 py-5 text-[11px] text-gray-500 font-mono">
                                    <div class="flex flex-col gap-1">
                                        <div v-if="p.Ê∑ªÂä†Êó∂Èó¥" :title="t('gen_0095')">
                                            <span class="text-[10px] font-bold text-gray-400 mr-1">{{ t('gen_0212') }}</span>
                                            {{ new Date(p.Ê∑ªÂä†Êó∂Èó¥).toLocaleString() }}
                                        </div>
                                        <div v-if="p.Êõ¥Êñ∞Êó∂Èó¥" :title="t('gen_0097')">
                                            <span class="text-[10px] font-bold text-gray-400 mr-1">{{ t('gen_0215') }}</span>
                                            {{ new Date(p.Êõ¥Êñ∞Êó∂Èó¥).toLocaleString() }}
                                        </div>
                                    </div>
                                </td>
                                <td v-if="settings.displayConfig.columnVisibility['Â∫èÂàó‰ø°ÊÅØ']" class="px-6 py-5 text-xs">
                                    <div v-if="p.Â∫èÂàó" class="flex flex-col gap-1">
                                        <div class="flex items-center gap-1.5 text-emerald-600 font-bold">
                                            <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
                                            {{ t('gen_0219') }}
                                        </div>
                                        <div class="text-[10px] text-gray-400 font-mono">{{ p.Â∫èÂàó.length }} bp</div>
                                    </div>
                                    <div v-else class="text-gray-300 italic flex items-center gap-1">
                                        <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
                                        {{ t('gen_0221') }}
                                    </div>
                                </td>
                                <td v-if="settings.displayConfig.columnVisibility['ÊèèËø∞']" class="px-6 py-5">
                                    <div class="text-xs text-gray-500 max-w-xs line-clamp-2" :title="p.ÊèèËø∞">{{ p.ÊèèËø∞ }}</div>
                                </td>
                                <td class="px-4 py-5 bg-white group-hover:bg-blue-50/30 transition-colors">
                                    <div class="flex flex-wrap gap-2 justify-center min-w-[7.5rem]">
                                        <button type="button" v-if="isElectron" @click="openPlasmidExternal(p)" :title="t('gen_1611')" class="inline-flex items-center gap-1.5 px-2 py-1.5 bg-indigo-50 text-indigo-600 text-[10px] font-bold rounded-lg hover:bg-indigo-600 hover:text-white transition-all shadow-sm justify-center btn-scale">
                                            <svg class="w-3 h-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" /></svg>
                                            <span class="hidden xl:inline">{{ t('gen_1611') }}</span>
                                        </button>
                                        <button type="button" @click="viewSequence(p)" :title="t('gen_1612')" class="inline-flex items-center gap-1.5 px-2 py-1.5 bg-emerald-50 text-emerald-600 text-[10px] font-bold rounded-lg hover:bg-emerald-600 hover:text-white transition-all shadow-sm justify-center btn-scale">
                                            <svg class="w-3 h-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                                            <span class="hidden xl:inline">{{ t('gen_1612') }}</span>
                                        </button>
                                        <button type="button" @click="editItem(p)" :title="t('gen_0229')" class="inline-flex items-center gap-1.5 px-2 py-1.5 bg-blue-50 text-blue-600 text-[10px] font-bold rounded-lg hover:bg-blue-600 hover:text-white transition-all shadow-sm justify-center btn-scale">
                                            <svg class="w-3 h-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                                            <span class="hidden xl:inline">{{ t('gen_0229') }}</span>
                                        </button>
                                        <button type="button" @click="deleteItem(p)" :title="t('gen_0231')" class="inline-flex items-center gap-1.5 px-2 py-1.5 bg-red-50 text-red-600 text-[10px] font-bold rounded-lg hover:bg-red-600 hover:text-white transition-all shadow-sm justify-center btn-scale">
                                            <svg class="w-3 h-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-4v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                                            <span class="hidden xl:inline">{{ t('gen_0231') }}</span>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    </div>
                </div>
                <!-- {{ t('gen_1613') }} -->
                <div class="px-6 py-5 flex justify-between items-center bg-gray-50 border-t border-gray-100">
                    <div class="text-sm text-gray-500 font-medium">
                        {{ t('gen_0233') }} <span class="text-gray-900 font-bold">{{ (currentPage-1)*pageSize + 1 }}</span> Âà∞
                        <span class="text-gray-900 font-bold">{{ Math.min(currentPage*pageSize, filteredPlasmids.length) }}</span> Êù°
                        (ÂÖ± {{ filteredPlasmids.length }} {{ t('gen_0234') }})
                    </div>
                    <div class="flex gap-2">
                        <button type="button" @click="currentPage--" :disabled="currentPage === 1" class="px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-bold text-gray-600 disabled:opacity-40 hover:bg-gray-50 transition-all shadow-sm">{{ t('gen_0235') }}</button>
                        <div class="flex items-center px-5 bg-white border border-gray-200 rounded-lg text-sm font-bold text-blue-600 shadow-sm">
                            {{ currentPage }} / {{ totalPages }}
                        </div>
                        <button type="button" @click="currentPage++" :disabled="currentPage >= totalPages" class="px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-bold text-gray-600 disabled:opacity-40 hover:bg-gray-50 transition-all shadow-sm">{{ t('gen_0236') }}</button>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>

</main>

        <!-- {{ t('gen_0237') }} prompt) -->
        <component is="transition" name="modal">
            <div v-if="showBatchInputModalState" v-cloak class="fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md border border-gray-100 overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center">
                        <h3 class="text-lg font-bold text-gray-800">{{ batchInputTitle }}</h3>
                        <button type="button" @click="showBatchInputModalState = false" class="text-gray-400 hover:text-gray-600" :aria-label="t('gen_0392')">
                            <span class="sr-only">{{ t('gen_0392') }}</span>
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                        </button>
                    </div>
                    <div class="p-6 space-y-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">{{ batchInputLabel }}</label>
                            <input v-model="batchInputValue" type="text" list="batch-input-options" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all" @keydown.enter.prevent="confirmBatchInput" ref="batchInputRef" autofocus>
                            <datalist id="batch-input-options">
                                <option v-for="opt in batchInputOptions" :key="opt" :value="opt"></option>
                            </datalist>
                        </div>
                    </div>
                    <div class="px-6 py-4 border-t border-gray-100 bg-gray-50 flex justify-end gap-3">
                        <button type="button" @click="showBatchInputModalState = false" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-100 font-medium">{{ t('gen_0239') }}</button>
                        <button type="button" @click="confirmBatchInput" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold shadow-md">{{ t('gen_0240') }}</button>
                    </div>
                </div>
            </div>
        </component>

        <!-- ÊâπÈáèÊ∑ªÂä†Âà∞È°πÁõÆÂºπÁ™ó -->
        <component is="transition" name="modal">
            <div v-if="showBatchProjectModal" v-cloak class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg border border-gray-100">
                    <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-2xl">
                        <h3 class="text-lg font-bold text-gray-800">{{ t('gen_0242') }}</h3>
                                        <button type="button" @click="showBatchProjectModal = false" class="text-gray-400 hover:text-gray-600 transition-colors" :aria-label="t('gen_0392')">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                        </button>
                    </div>
                    <div class="p-6">
                        <p class="text-sm text-gray-500 mb-4">
                            {{ t('gen_0243') }} <span class="font-bold text-blue-600">{{ selectedPlasmids.size }}</span> {{ t('gen_0244') }}
                        </p>
                        <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg max-h-60 overflow-y-auto">
                            <div v-if="projects && projects.length > 0" class="flex flex-col gap-2">
                                <label v-for="proj in projects" :key="proj.id" class="flex items-center gap-3 px-3 py-2 bg-white border border-gray-200 rounded-lg cursor-pointer hover:border-blue-300 hover:bg-blue-50 transition-all select-none">
                                    <input type="checkbox" :value="proj.id" v-model="batchProjectTarget" class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                                    <span class="text-sm text-gray-700 font-medium">{{ proj.name }}</span>
                                </label>
                            </div>
                            <div v-else class="text-gray-400 text-sm text-center py-4">
                                {{ t('gen_0245') }}
                            </div>
                        </div>
                    </div>
                    <div class="px-6 py-4 bg-gray-50 rounded-b-2xl flex justify-end gap-3">
                        <button type="button" @click="showBatchProjectModal = false" class="px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-all">{{ t('gen_0239') }}</button>
                        <button type="button" @click="submitBatchProject" class="px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-md transition-all">{{ t('gen_0246') }}</button>
                    </div>
                </div>
            </div>
        </component>

        <!-- UniProt ÊêúÁ¥¢ÂºπÁ™ó -->
        <component is="transition" name="modal">
            <div v-if="showUniProtModal" v-cloak class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl flex flex-col border border-gray-100 overflow-hidden max-h-[85vh]">
                    <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                        <h3 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                            <span class="w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center">
                                U
                            </span>
                            UniProt {{ t('gen_0248') }} <span class="text-blue-600 ml-1">{{ uniProtModalData.targetGene }}</span>
                        </h3>
                        <button type="button" @click="closeUniProtModal" class="text-gray-400 hover:text-gray-600 transition-colors p-1 hover:bg-gray-100 rounded-md" :aria-label="t('gen_0392')">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                        </button>
                    </div>
                    
                    <div class="p-6 overflow-y-auto">
                        <div v-if="uniProtModalData.loading" class="flex flex-col items-center justify-center py-12">
                             <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-4"></div>
                             <p class="text-gray-500 animate-pulse">Ê≠£Âú®Êü•ËØ¢ UniProt Êï∞ÊçÆÂ∫ì...</p>
                        </div>
                        
                        <div v-else-if="uniProtModalData.result" class="space-y-6">
                            <!-- Result Header -->
                            <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h4 class="text-lg font-bold text-gray-800">{{ uniProtModalData.result.name }}</h4>
                                        <div class="flex items-center gap-2 mt-1 text-sm text-gray-600">
                                            <span class="bg-white px-2 py-0.5 rounded border border-blue-200 text-blue-600 font-mono text-xs">{{ uniProtModalData.result.uniprotId }}</span>
                                            <span class="italic">{{ uniProtModalData.result.organism }}</span>
                                        </div>
                                    </div>
                                    <a :href="uniProtModalData.result.link" @click.prevent="openExternalLink(uniProtModalData.result.link)" class="text-xs text-blue-600 hover:underline flex items-center gap-1">
                                        UniProtÂÆòÁΩë
                                        <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" /></svg>
                                    </a>
                                </div>
                            </div>

                            <!-- Details -->
                            <div class="space-y-4">
                                <div v-if="uniProtModalData.result.function">
                                    <h5 class="text-sm font-bold text-gray-700 mb-1">{{ t('gen_0251') }}</h5>
                                    <p class="text-sm text-gray-600 leading-relaxed bg-gray-50 p-3 rounded-lg border border-gray-100">{{ uniProtModalData.result.function }}</p>
                                </div>
                                
                                <div class="flex gap-6">
                                    <div v-if="uniProtModalData.result.mass">
                                        <h5 class="text-sm font-bold text-gray-700 mb-1">{{ t('gen_0252') }}</h5>
                                        <p class="text-sm text-gray-900 font-mono">{{ uniProtModalData.result.mass }} Da</p>
                                    </div>
                                    <div v-if="uniProtModalData.result.length">
                                        <h5 class="text-sm font-bold text-gray-700 mb-1">{{ t('gen_0253') }}</h5>
                                        <p class="text-sm text-gray-900 font-mono">{{ uniProtModalData.result.length }} aa</p>
                                    </div>
                                </div>

                                <div v-if="uniProtModalData.result.sequence">
                                    <h5 class="text-sm font-bold text-gray-700 mb-1">{{ t('gen_0254') }}</h5>
                                    <div class="bg-gray-800 text-gray-300 font-mono text-xs p-3 rounded-lg break-all max-h-32 overflow-y-auto select-all">
                                        {{ uniProtModalData.result.sequence }}
                                    </div>
                                </div>
                            </div>

                            <!-- Footer Action -->
                            <div v-if="uniProtModalData.targetPlasmid" class="pt-4 border-t border-gray-100 flex justify-end">
                                <button type="button" @click="applyUniProtData" class="px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-md transition-all flex items-center gap-2" :aria-label="t('gen_1112') + ' ' + (uniProtModalData.targetPlasmid ? uniProtModalData.targetPlasmid.Êñá‰ª∂Âêç : '')">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
                                {{ t('gen_1112') }} "{{ uniProtModalData.targetPlasmid ? uniProtModalData.targetPlasmid.Êñá‰ª∂Âêç : '' }}"
                            </button>
                            </div>
                        </div>

                        <div v-else class="text-center py-12 text-gray-400 flex flex-col items-center">
                            <svg class="w-12 h-12 mb-3 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" /></svg>
                            <p>{{ uniProtModalData.error || 'Êú™ÊâæÂà∞ÂåπÈÖçÁªìÊûú' }}</p>
                            <p v-if="!uniProtModalData.error" class="text-xs text-gray-400 mt-2">{{ t('gen_0257') }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </component>

        <!-- È°πÁõÆÁÆ°ÁêÜÂºπÁ™ó -->
        <component is="transition" name="modal">
            <div v-if="showProjectModal" v-cloak class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-5xl h-[85vh] flex flex-col border border-gray-100 overflow-hidden">
                    <div class="px-8 py-5 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                        <h3 class="text-xl font-bold text-gray-800 flex items-center gap-3">
                            <span class="w-10 h-10 bg-purple-100 text-purple-600 rounded-xl flex items-center justify-center shadow-sm">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>
                            </span>
                            {{ t('gen_0259') }}
                        </h3>
                        <button type="button" @click="showProjectModal = false" class="text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-200 rounded-lg" :aria-label="t('gen_0392')">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                        </button>
                    </div>
                    
                    <div class="flex-1 flex overflow-hidden">
                        <!-- {{ t('gen_0260') }} -->
                        <div class="w-1/3 border-r border-gray-100 flex flex-col bg-gray-50/50">
                            <div class="p-4 border-b border-gray-100 space-y-3">
                                <button type="button" @click="openCreateProject" class="w-full py-2.5 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-700 shadow-lg shadow-purple-200 transition-all flex items-center justify-center gap-2">
                                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
                                    {{ t('gen_0261') }}
                                </button>
                                <div class="relative">
                                    <svg class="w-4 h-4 text-gray-400 absolute left-3 top-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                                    <input v-model="projectSearchQuery" type="text" placeholder="ÊêúÁ¥¢È°πÁõÆ..." class="w-full pl-9 pr-4 py-2 bg-white border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 outline-none">
                                </div>
                            </div>
                            <div class="flex-1 overflow-y-auto p-3 space-y-2">
                                <div v-for="proj in filteredProjects" :key="proj.id" 
                                    @click="toggleProjectExpand(proj.id)"
                                    :class="['p-4 rounded-xl cursor-pointer border transition-all hover:shadow-md', expandedProjectIds.has(proj.id) ? 'bg-white border-purple-200 shadow-md ring-1 ring-purple-100' : 'bg-white border-transparent hover:border-gray-200']">
                                    <div class="flex justify-between items-start">
                                        <h4 class="font-bold text-gray-800">{{ proj.name }}</h4>
                                        <div class="flex gap-1" @click.stop>
                                            <button type="button" @click="openEditProject(proj)" class="p-1 text-gray-400 hover:text-blue-600 transition-colors" :title="t('gen_0263')"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg></button>
                                            <button type="button" @click="removeProject(proj)" class="p-1 text-gray-400 hover:text-red-600 transition-colors" :title="t('gen_0264')"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-4v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg></button>
                                        </div>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1 line-clamp-2">{{ proj.description || 'Êó†ÊèèËø∞' }}</p>
                                    <div class="mt-3 flex justify-between items-center text-xs">
                                        <span class="bg-purple-50 text-purple-600 px-2 py-0.5 rounded-full font-medium">{{ (proj.plasmidIds || []).length }} {{ t('gen_0069') }}</span>
                                        <span class="text-gray-400">{{ new Date(proj.updatedAt).toLocaleDateString() }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Âè≥‰æßÔºöÈ°πÁõÆËØ¶ÊÉÖ/Ë¥®Á≤íÂàóË°® -->
                        <div class="w-2/3 bg-white flex flex-col">
                            <div v-if="Array.from(expandedProjectIds).length === 1" class="flex-1 flex flex-col h-full">
                                <template v-for="projId in Array.from(expandedProjectIds)" :key="projId">
                                    <div class="px-8 py-6 border-b border-gray-100">
                                        <div class="flex justify-between items-start mb-2">
                                            <h2 class="text-2xl font-bold text-gray-800">{{ getProjectNameById(projId) }}</h2>
                                            <span class="text-xs text-gray-400 font-mono">ID: {{ projId }}</span>
                                        </div>
                                        <p class="text-gray-600 text-sm mb-4">{{ getProjectDescriptionById(projId) || 'ÊöÇÊó†ÊèèËø∞' }}</p>
                                        <div class="flex flex-wrap gap-2">
                                            <div v-for="member in getProjectMembersById(projId)" :key="member" class="px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded-lg font-medium flex items-center gap-1">
                                                <div class="w-4 h-4 rounded-full bg-blue-200 text-blue-700 flex items-center justify-center text-[8px] font-bold">{{ member.charAt(0).toUpperCase() }}</div>
                                                {{ member }}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex-1 overflow-y-auto p-6 bg-gray-50/30">
                                        <h4 class="text-sm font-bold text-gray-700 mb-4 flex items-center gap-2">
                                            <svg class="w-4 h-4 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>
                                            ÂÖ≥ËÅîË¥®Á≤íÊ∏ÖÂçï ({{ getProjectPlasmidsById(projId).length }})
                                        </h4>
                                        
                                        <div v-if="getProjectPlasmidsById(projId).length > 0" class="space-y-2">
                                            <div v-for="p in getProjectPlasmidsById(projId)" :key="p.id" class="flex items-center justify-between p-3 bg-white border border-gray-100 rounded-lg hover:border-purple-200 transition-all group">
                                                <div class="flex items-center gap-3">
                                                    <div class="w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-gray-500 font-bold text-xs group-hover:bg-purple-100 group-hover:text-purple-600 transition-colors">
                                                    {{ getVectorTypeChar(p) }}
                                                </div>
                                                    <div>
                                                        <div class="text-sm font-bold text-gray-800">{{ p.Êñá‰ª∂Âêç }}</div>
                                                        <div class="text-[10px] text-gray-400">{{ p.Èù∂Âü∫Âõ† || 'Êó†Èù∂Âü∫Âõ†' }} | {{ p.Â§ßËÇ†ÊùÜËèåÊäóÊÄß || 'Êó†ÊäóÊÄß' }}</div>
                                                    </div>
                                                </div>
                                                <button type="button" @click="removePlasmidFromProject(getProjectById(projId), p)" class="text-gray-300 hover:text-red-500 p-2 transition-colors" :title="t('gen_0272')">
                                                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                                                </button>
                                            </div>
                                        </div>
                                        <div v-else class="text-center py-10 text-gray-400 text-sm border-2 border-dashed border-gray-200 rounded-xl">
                                            {{ t('gen_0273') }}
                                        </div>
                                    </div>
                                </template>
                            </div>
                            <div v-else class="flex-1 flex flex-col items-center justify-center text-gray-400 p-10">
                                <svg class="w-16 h-16 mb-4 opacity-20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" /></svg>
                                <p>{{ t('gen_0274') }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </component>

        <!-- {{ t('gen_0275') }} -->
        <component is="transition" name="modal">
            <div v-if="showProjectForm" v-cloak class="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md border border-gray-100 overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center">
                        <h3 class="text-lg font-bold text-gray-800">{{ isEditingProject ? 'ÁºñËæëÈ°πÁõÆ' : 'Êñ∞Âª∫È°πÁõÆ' }}</h3>
                        <button type="button" @click="showProjectForm = false" class="text-gray-400 hover:text-gray-600" :aria-label="t('gen_0392')"><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button>
                    </div>
                    <div class="p-6 space-y-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">{{ t('gen_0277') }} <span class="text-red-500">*</span></label>
                            <input v-model="projectForm.name" type="text" class="w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none" placeholder="‰æãÂ¶ÇÔºöÁôåÁóáÁ†îÁ©∂-2024">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">{{ t('gen_0279') }}</label>
                            <textarea v-model="projectForm.description" rows="3" class="w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none" placeholder="ÁÆÄË¶ÅÊèèËø∞È°πÁõÆÁõÆÊ†á..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-1">{{ t('gen_0281') }}</label>
                            <div class="flex flex-wrap gap-2 mb-2">
                                <span v-for="m in projectForm.members" :key="m" class="px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-md flex items-center gap-1">
                                    {{ m }}
                                    <button type="button" @click="projectForm.members = projectForm.members.filter(x => x !== m)" class="hover:text-purple-900" aria-label="ÁßªÈô§ÊàêÂëò">√ó</button>
                                </span>
                            </div>
                            <div class="flex gap-2">
                                <div class="relative flex-1">
                                    <input v-model="newMemberName" type="text" list="list-all-members" placeholder="ËæìÂÖ•Êñ∞ÊàêÂëòÊàñÈÄâÊã©" 
                                           class="w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-sm"
                                           @keydown.enter.prevent="addMember">
                                    <datalist id="list-all-members">
                                        <option v-for="m in availableMembers" :key="m" :value="m"></option>
                                    </datalist>
                                </div>
                                <button type="button" class="px-3 py-2 bg-purple-100 text-purple-600 rounded-lg hover:bg-purple-200 font-bold"
                                        @click="addMember">
                                    +
                                </button>
                            </div>
                            <!-- Removed select since input+datalist covers it -->
                        </div>
                    </div>
                    <div class="px-6 py-4 border-t border-gray-100 bg-gray-50 flex justify-end gap-3">
                        <button type="button" @click="showProjectForm = false" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-100 font-medium">{{ t('gen_0239') }}</button>
                        <button type="button" @click="submitProjectForm" class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-bold shadow-md">{{ t('gen_0284') }}</button>
                    </div>
                </div>
            </div>
        </component>

        <!-- ÁºñËæëÂºπÁ™ó -->
        <component is="transition" name="modal">
            <div v-if="editingItem" v-cloak class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-gray-100">
                    <div class="px-8 py-6 border-b border-gray-100 flex justify-between items-center sticky top-0 bg-white z-10">
                        <h3 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                            <span class="w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
                            </span>
                            {{ t('gen_0286') }}
                        </h3>
                        <div class="flex items-center gap-2">
                            <button type="button" @click="saveEdit" class="text-green-500 hover:text-green-700 transition-colors p-2 hover:bg-green-50 rounded-lg" :aria-label="t('gen_0287')">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
                            </button>
                            <button type="button" @click="editingItem = null" class="text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-lg" :aria-label="t('gen_0288')">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                            </button>
                        </div>
                    </div>
                    <div class="p-8 space-y-6">
                        <!-- Ê®°ÂºèÂàáÊç¢ Tabs (‰ªÖÂú®Êñ∞Âª∫Êó∂ÊòæÁ§∫) -->
                        <div v-if="editingItem && editingItem.id && editingItem.id.startsWith('plasmid_')" class="flex border-b border-gray-200 mb-2">
                            <button type="button" @click="batchMode = false" :class="['px-6 py-3 text-sm font-bold border-b-2 transition-all', !batchMode ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50']">
                                {{ t('gen_0290') }}
                            </button>
                            <button type="button" @click="batchMode = true" :class="['px-6 py-3 text-sm font-bold border-b-2 transition-all', batchMode ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50']">
                                {{ t('gen_0291') }}
                            </button>
                        </div>

                        <!-- ÊâπÈáèÁ≤òË¥¥ËßÜÂõæ -->
                        <div v-if="batchMode" class="space-y-4">
                            <div class="bg-blue-50 border border-blue-100 rounded-lg p-4 mb-4">
                                <h4 class="text-sm font-bold text-blue-800 mb-2 flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                                    {{ t('gen_0293') }}
                                </h4>
                                <ul class="text-xs text-blue-700 space-y-1 list-disc list-inside">
                                    <li>{{ t('gen_0294') }}</li>
                                    <li>{{ t('gen_0295') }}</li>
                                    <li>{{ t('gen_0296') }}</li>
                                </ul>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">Ë¥®Á≤íÂêçÁß∞ÂàóË°® (ÊØèË°å‰∏Ä‰∏™)</label>
                                <textarea v-model="batchNames" rows="10" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all font-mono text-xs" placeholder="‰æãÂ¶ÇÔºö
pLenti-CMV-EGFP-Puro
pET28a-His-Target
..."></textarea>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-gray-100">
                                <div>
                                    <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0299') }}</label>
                                    <input v-model="editForm.ÊåÅÊúâ‰∫∫" type="text" list="list-owners" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0301') }}</label>
                                    <div class="p-3 bg-gray-50 border border-gray-200 rounded-lg max-h-32 overflow-y-auto">
                                        <div v-if="projects && projects.length > 0" class="flex flex-wrap gap-2">
                                            <label v-for="proj in projects" :key="proj.id" class="flex items-center gap-2 px-2 py-1 bg-white border border-gray-200 rounded cursor-pointer text-xs">
                                                <input type="checkbox" :value="proj.id" v-model="editForm.È°πÁõÆ" class="w-3 h-3 text-blue-600 rounded border-gray-300">
                                                <span>{{ proj.name }}</span>
                                            </label>
                                        </div>
                                        <div v-else class="text-xs text-gray-400 text-center">{{ t('gen_0072') }}</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÂçïÊù°ÁºñËæëËßÜÂõæ -->
                        <div v-show="!batchMode" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="md:col-span-2">
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0137') }}</label>
                                <div class="flex items-center gap-3">
                                    <input v-model="editForm.Êñá‰ª∂Âêç" type="text" class="flex-1 px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                                    <button type="button" @click="manualRecognizeName" class="px-4 py-3 bg-indigo-50 text-indigo-600 text-xs font-bold rounded-lg hover:bg-indigo-600 hover:text-white transition-all shadow-sm">
                                        {{ t('gen_0305') }}
                                    </button>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0146') }}</label>
                                <input v-model="editForm.ËΩΩ‰ΩìÁ±ªÂûã" type="text" list="list-ËΩΩ‰ΩìÁ±ªÂûã" placeholder="Áî®ÈÄóÂè∑ÈöîÂºÄ" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0153') }}</label>
                                <input v-model="editForm.Èù∂Âü∫Âõ†" type="text" list="list-Èù∂Âü∫Âõ†" placeholder="Áî®ÈÄóÂè∑ÈöîÂºÄ" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0150') }}</label>
                                <input v-model="editForm.Áâ©Áßç" type="text" list="list-Áâ©Áßç" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0161') }}</label>
                                <input v-model="editForm.ÂäüËÉΩ" type="text" list="list-ÂäüËÉΩ" placeholder="Áî®ÈÄóÂè∑ÈöîÂºÄ" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0165') }}</label>
                                <input v-model="editForm.Â§ßËÇ†ÊùÜËèåÊäóÊÄß" type="text" list="list-Â§ßËÇ†ÊùÜËèåÊäóÊÄß" placeholder="Áî®ÈÄóÂè∑ÈöîÂºÄ" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0168') }}</label>
                                <input v-model="editForm.Âì∫‰π≥Âä®Áâ©ÊäóÊÄß" type="text" list="list-Âì∫‰π≥Âä®Áâ©ÊäóÊÄß" placeholder="Áî®ÈÄóÂè∑ÈöîÂºÄ" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0176') }}</label>
                                <input v-model="editForm.ÊèíÂÖ•Á±ªÂûã" type="text" list="list-ÊèíÂÖ•Á±ªÂûã" placeholder="Â¶Ç shRNA, cDNA" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0180') }}</label>
                                <input v-model="editForm.ËõãÁôΩÊ†áÁ≠æ" type="text" list="list-ËõãÁôΩÊ†áÁ≠æ" placeholder="Â¶Ç Flag, Myc, His" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0184') }}</label>
                                <input v-model="editForm.ËçßÂÖâËõãÁôΩ" type="text" list="list-ËçßÂÖâËõãÁôΩ" placeholder="Â¶Ç EGFP, mCherry" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0188') }}</label>
                                <input v-model="editForm.ÂêØÂä®Â≠ê" type="text" list="list-ÂêØÂä®Â≠ê" placeholder="Â¶Ç CMV, EF1a, U6" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0171') }}</label>
                                <input v-model="editForm.ÂõõÁéØÁ¥†ËØ±ÂØº" type="text" list="list-ÂõõÁéØÁ¥†ËØ±ÂØº" placeholder="ÊòØ/Âê¶ Êàñ ËØ±ÂØºÂâÇ" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0192') }}</label>
                                <input v-model="editForm.Á™ÅÂèò" type="text" list="list-Á™ÅÂèò" placeholder="ÊèèËø∞Á™ÅÂèò‰ΩçÁÇπ" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0326') }}</label>
                                <textarea v-model="editForm.Â∫èÂàó" rows="4" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all font-mono text-xs uppercase" placeholder="Á≤òË¥¥ÊàñËæìÂÖ• ATCG Â∫èÂàó..."></textarea>
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0329') }}</label>
                                <input v-model="editForm.Ë∑ØÂæÑ" type="text" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all font-mono text-xs">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0331') }}</label>
                                <textarea v-model="editForm.ÊèèËø∞" rows="3" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all"></textarea>
                            </div>

                            <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0333') }}</label>
                                    <input v-model="editForm.‰øùÂ≠ò‰ΩçÁΩÆ" type="text" list="list-locations" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all" placeholder="‰æãÂ¶ÇÔºöÂÜ∞ÁÆ±A-Â±Ç1-Áõí3">
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-gray-700 mb-2">{{ t('gen_0337') }}</label>
                                    <div class="relative flex items-center gap-2">
                                        <input v-model="editForm.ÊåÅÊúâ‰∫∫" type="text" list="list-owners" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all" placeholder="ÈÄâÊã©ÊàñËæìÂÖ•Êñ∞ÂêçÂ≠ó">
                                        <button type="button" @click="createHolder" class="px-3 py-3 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 hover:text-blue-600 transition-colors border border-gray-200" title="Êñ∞Âª∫ÊåÅÊúâ‰∫∫">
                                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
                                        </button>
                                    </div>
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <button type="button" @click="editForm.ÊåÅÊúâ‰∫∫ = settings.defaultOwner || editForm.ÊåÅÊúâ‰∫∫" class="px-3 py-1.5 text-[10px] font-bold bg-blue-50 text-blue-600 rounded-md hover:bg-blue-600 hover:text-white transition-all">{{ t('gen_0340') }}</button>
                                        <button type="button" @click="settings.defaultOwner = editForm.ÊåÅÊúâ‰∫∫ || settings.defaultOwner" class="px-3 py-1.5 text-[10px] font-bold bg-emerald-50 text-emerald-600 rounded-md hover:bg-emerald-600 hover:text-white transition-all">{{ t('gen_0342') }}</button>
                                    </div>
                                    <p class="text-[10px] text-gray-400 mt-1">{{ t('gen_0343') }}</p>
                                </div>
                            </div>
                            <div class="md:col-span-2">
                                <div class="flex justify-between items-center mb-2">
                                    <label class="block text-sm font-bold text-gray-700">{{ t('gen_0344') }}</label>
                                    <button type="button" @click="openCreateProject" class="text-xs text-blue-600 hover:text-blue-800 font-bold flex items-center gap-1">
                                        <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
                                        {{ t('gen_0261') }}
                                    </button>
                                </div>
                                <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg max-h-40 overflow-y-auto">
                                    <div v-if="projects && projects.length > 0" class="flex flex-wrap gap-3">
                                        <label v-for="proj in projects" :key="proj.id" class="flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-lg cursor-pointer hover:border-blue-300 hover:bg-blue-50 transition-all select-none">
                                            <input type="checkbox" :value="proj.id" v-model="editForm.È°πÁõÆ" class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                                            <span class="text-sm text-gray-700">{{ proj.name }}</span>
                                        </label>
                                    </div>
                                    <div v-else class="text-gray-400 text-sm text-center py-2 flex flex-col items-center gap-1">
                                        <span>{{ t('gen_0072') }}</span>
                                        <button type="button" @click="openCreateProject" class="text-blue-500 hover:text-blue-700 font-bold text-xs underline">{{ t('gen_0346') }}</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Â§ñÈÉ®Êï∞ÊçÆÂ∫ìÂèÇËÄÉ -->

                        </div>
                    </div>
                    <div class="px-8 py-6 border-t border-gray-100 bg-gray-50 flex justify-end gap-3 rounded-b-2xl">
                        <button type="button" @click="editingItem = null" class="px-6 py-2.5 text-gray-600 font-bold hover:bg-gray-200 rounded-lg transition-all">{{ t('gen_0239') }}</button>
                        <button type="button" @click="saveEdit" class="px-8 py-2.5 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all">{{ t('gen_0348') }}</button>
                    </div>
                </div>
            </div>
        </component>

        <!-- Á≥ªÁªüËÆæÁΩÆÂºπÁ™ó -->
        <component is="transition" name="modal">
            <div v-if="showSettingsModal" v-cloak class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm" @click.self="showSettingsModal = false">
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-xl border border-gray-100 overflow-hidden">
                    <div class="px-8 py-6 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                        <h3 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                            <svg class="w-6 h-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            {{ t('gen_0350') }}
                        </h3>
                        <button type="button" @click="showSettingsModal = false" class="text-gray-400 hover:text-gray-700 transition-colors p-2 hover:bg-gray-200 rounded-lg" :aria-label="t('gen_0392')">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                        </button>
                    </div>

                    <div class="p-8 space-y-6">
                        <!-- ÊòæÁ§∫ËÆæÁΩÆ -->
                        <div>
                            <h4 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-4">{{ t('gen_0352') }}</h4>
                            <div class="space-y-4">
                                <!-- ËØ≠Ë®ÄËÆæÁΩÆ -->
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-700 font-medium">{{ t('gen_0354') }}</span>
                                    <div class="flex bg-gray-100 p-1 rounded-lg">
                                        <button type="button" @click="setLocale('zh')" :class="['px-3 py-1 text-[10px] font-bold rounded-md transition-all', locale === 'zh' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700']">{{ t('gen_0355') }}</button>
                                        <button type="button" @click="setLocale('en')" :class="['px-3 py-1 text-[10px] font-bold rounded-md transition-all', locale === 'en' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700']">English</button>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-700 font-medium">{{ t('gen_0088') }}</span>
                                    <select v-model="settings.displayConfig.itemsPerPage" class="px-3 py-1.5 border border-gray-200 rounded-lg outline-none focus:ring-2 focus:ring-blue-500">
                                        <option :value="10">10 Êù°</option>
                                        <option :value="20">20 Êù°</option>
                                        <option :value="50">50 Êù°</option>
                                        <option :value="100">100 Êù°</option>
                                    </select>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-700 font-medium">{{ t('gen_0090') }}</span>
                                    <div class="flex bg-gray-100 p-1 rounded-lg">
                                        <button type="button" @click="settings.displayConfig.tableDensity = 'compact'" :class="['px-3 py-1 text-[10px] font-bold rounded-md transition-all', settings.displayConfig.tableDensity === 'compact' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700']">{{ t('gen_0091') }}</button>
                                        <button type="button" @click="settings.displayConfig.tableDensity = 'comfortable'" :class="['px-3 py-1 text-[10px] font-bold rounded-md transition-all', settings.displayConfig.tableDensity !== 'compact' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700']">{{ t('gen_0092') }}</button>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-700 font-medium">{{ t('gen_0356') }}</span>
                                    <input type="checkbox" v-model="settings.displayConfig.showTags" class="w-5 h-5 text-blue-600 rounded border-gray-300">
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-700 font-medium">{{ t('gen_0357') }}</span>
                                    <input type="checkbox" v-model="settings.displayConfig.columnVisibility['‰∏ì‰∏öÁâπÂæÅ']" class="w-5 h-5 text-blue-600 rounded border-gray-300">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">{{ t('gen_0299') }}</label>
                                    <input v-model="settings.defaultOwner" type="text" list="list-owners" placeholder="Áî®‰∫éÊñ∞Âª∫Ë¥®Á≤íÁöÑÈªòËÆ§ÊåÅÊúâ‰∫∫" class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                                </div>
                            </div>
                        </div>

                        <!-- ËØÜÂà´ËÆæÁΩÆ -->
                        <div v-if="isElectron">
                            <h4 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-4">{{ t('gen_0361') }}</h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ÈªòËÆ§ÊâìÂºÄËΩØ‰ª∂Ë∑ØÂæÑ (ÂèØÈÄâ)</label>
                                    <div class="flex gap-2">
                                        <input type="text" v-model="settings.externalSoftwarePath" placeholder="Â¶Ç: C:\Program Files\SnapGene\SnapGene.exe" 
                                            class="flex-1 px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 outline-none transition-all">
                                        <button type="button" @click="selectExternalSoftware" class="px-4 py-2.5 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-600 hover:text-white transition-all shadow-sm" aria-label="ÈÄâÊã©ËΩØ‰ª∂">
                                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" /></svg>
                                        </button>
                                    </div>
                                    <p class="mt-1.5 text-xs text-gray-400">ÁïôÁ©∫Âàô‰ΩøÁî®Á≥ªÁªüÈªòËÆ§ËΩØ‰ª∂„ÄÇÊåáÂÆöÂêéÔºåÁÇπÂáª‚ÄúËΩØ‰ª∂ÊâìÂºÄ‚ÄùÂ∞ÜÂº∫Âà∂‰ΩøÁî®ËØ•Á®ãÂ∫è„ÄÇ</p>
                                </div>
                            </div>
                        </div>

                        <!-- ËØÜÂà´ËÆæÁΩÆ -->
                        <div>
                            <h4 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-4">{{ t('gen_0368') }}</h4>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-700 font-medium">{{ t('gen_0369') }}</span>
                                    <input type="checkbox" v-model="settings.recognitionConfig.saveSequence" class="w-5 h-5 text-blue-600 rounded border-gray-300">
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-700 font-medium">{{ t('gen_0370') }}</span>
                                    <input type="checkbox" v-model="settings.recognitionConfig.enableNlp" class="w-5 h-5 text-blue-600 rounded border-gray-300">
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-700 font-medium">{{ t('gen_0371') }}</span>
                                    <input type="checkbox" v-model="settings.recognitionConfig.extractTargetGene" class="w-5 h-5 text-blue-600 rounded border-gray-300">
                                </div>
                                <div class="pt-4 border-t border-gray-100">
                                    <h5 class="text-sm font-bold text-gray-700 mb-2">{{ t('gen_0372') }}</h5>
                                    <p class="text-xs text-gray-500 mb-3">Â¶ÇÊûúÂèëÁé∞Â∫èÂàóÊñá‰ª∂Áº∫Â§±Êàñ CSV ÂØºÂá∫Êó†Â∫èÂàóÔºåÂèØ‰ΩøÁî®Ê≠§ÂäüËÉΩÈáçÊñ∞ÁîüÊàê</p>
                                    <button type="button" @click="regenerateAllSequences" class="w-full py-2.5 bg-emerald-50 text-emerald-600 font-bold rounded-lg hover:bg-emerald-600 hover:text-white transition-all flex items-center justify-center gap-2 border border-emerald-100">
                                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                                        {{ t('gen_0375') }}
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- {{ t('gen_0460') }} -->
                        <div class="pt-6 border-t border-gray-100">
                            <button type="button" @click="saveSettingsFile" class="w-full py-3 bg-blue-50 text-blue-600 font-bold rounded-xl hover:bg-blue-600 hover:text-white transition-all flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
                                {{ t('gen_0377') }}
                            </button>
                            <p class="text-center text-[10px] text-gray-400 mt-2">{{ t('gen_0378') }}</p>
                        </div>
                    </div>
                    <div class="px-8 py-4 bg-gray-50 flex justify-end gap-3">
                        <button type="button" @click="showSettingsModal = false" class="px-6 py-2 bg-white border border-gray-300 text-gray-700 font-bold rounded-lg hover:bg-gray-100 transition-all">
                            {{ t('gen_0239') }}
                        </button>
                        <button type="button" @click="showSettingsModal = false" class="px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-md transition-all">
                            {{ t('gen_0240') }}
                        </button>
                    </div>
                </div>
            </div>
        </component>

        <!-- ÊâπÈáèÊìç‰ΩúÊ†è -->
        <component is="transition" name="fade">
            <div v-if="selectedPlasmids.size > 0" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white rounded-xl shadow-2xl border border-gray-200 px-6 py-3 flex items-center gap-4 z-40">
                <div class="text-sm text-gray-600 font-medium">
                    {{ t('gen_0380') }} <span class="text-blue-600 font-bold text-lg">{{ selectedPlasmids.size }}</span> È°π
                </div>
                <div class="h-6 w-px bg-gray-200"></div>
                <div class="flex items-center gap-2">
                    <button type="button" @click="openBatchProjectModal" class="px-3 py-1.5 bg-indigo-50 text-indigo-600 text-sm font-bold rounded-lg hover:bg-indigo-600 hover:text-white transition-all flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" /></svg>
                        {{ t('gen_0381') }}
                    </button>
                    <button type="button" @click="batchUpdateLocation" class="px-3 py-1.5 bg-blue-50 text-blue-600 text-sm font-bold rounded-lg hover:bg-blue-600 hover:text-white transition-all flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        {{ t('gen_0382') }}
                    </button>
                    <button type="button" @click="batchUpdateOwner" class="px-3 py-1.5 bg-teal-50 text-teal-600 text-sm font-bold rounded-lg hover:bg-teal-600 hover:text-white transition-all flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                        {{ t('gen_0383') }}
                    </button>
                    <div class="h-6 w-px bg-gray-200 mx-1"></div>
                    <button type="button" @click="batchDelete" class="px-3 py-1.5 bg-red-50 text-red-600 text-sm font-bold rounded-lg hover:bg-red-600 hover:text-white transition-all flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-4v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                        {{ t('gen_0231') }}
                    </button>
                    <button type="button" @click="selectedPlasmids.clear()" class="ml-2 text-gray-400 hover:text-gray-600 transition-colors" aria-label="Ê∏ÖÁ©∫ÈÄâÊã©">
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
        </component>

        <!-- Â∫èÂàóÊü•ÁúãÂô®ÂºπÁ™ó -->
        <component is="transition" name="modal">
            <div v-if="showSequenceModal" v-cloak class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-md">
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col border border-gray-100 overflow-hidden">
                    <div class="px-8 py-6 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                        <div class="flex flex-col">
                            <h3 class="text-xl font-bold text-gray-800 flex items-center gap-3">
                                <span class="w-10 h-10 bg-emerald-100 text-emerald-600 rounded-xl flex items-center justify-center">
                                    <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                                </span>
                                {{ t('gen_0386') }}
                            </h3>
                            <div class="text-xs text-gray-500 mt-1 font-mono">{{ currentSequenceFileName }} (ÈïøÂ∫¶: {{ currentSequenceLength }} bp)</div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="flex items-center gap-2 mr-4 bg-white px-3 py-1.5 rounded-lg border border-gray-200">
                                <label class="flex items-center gap-1.5 text-xs font-bold text-gray-500 cursor-pointer">
                                    <input type="checkbox" v-model="sequenceViewerOptions.coloring" class="w-4 h-4 rounded border-gray-300">
                                    ATCG {{ t('gen_0388') }}
                                </label>
                                <label class="flex items-center gap-1.5 text-xs font-bold text-gray-500 cursor-pointer ml-2">
                                    <input type="checkbox" v-model="sequenceViewerOptions.showNumbers" class="w-4 h-4 rounded border-gray-300">
                                    {{ t('gen_0389') }}
                                </label>
                            </div>
                            <button type="button" @click="showSequenceModal = false" class="text-gray-400 hover:text-gray-600 transition-colors" :aria-label="t('gen_0392')">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                            </button>
                        </div>
                    </div>
                    <div class="flex-1 overflow-auto bg-slate-50 p-8 font-mono text-sm leading-relaxed tracking-widest break-all select-all scrollbar-thin">
                        <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-inner min-h-full">
                            <template v-if="sequenceViewerOptions.coloring">
                                <span v-for="(char, i) in currentSequence" :key="i" 
                                    :class="[
                                        char === 'A' ? 'text-red-500' : 
                                        char === 'T' ? 'text-blue-500' : 
                                        char === 'C' ? 'text-green-500' : 
                                        char === 'G' ? 'text-orange-500' : 'text-gray-400',
                                        'inline-block'
                                    ]">
                                    <span v-if="sequenceViewerOptions.showNumbers && i % 50 === 0" class="absolute -left-1 text-[9px] text-gray-300 pointer-events-none select-none">{{ i + 1 }}</span>
                                    {{ char }}
                                </span>
                            </template>
                            <template v-else>
                                {{ currentSequence }}
                            </template>
                        </div>
                    </div>
                    <div class="px-8 py-6 border-t border-gray-100 bg-gray-50 flex justify-between items-center">
                        <div class="flex gap-2">
                            <button type="button" v-if="isElectron && currentSequence" @click="openSequenceExternal" class="px-4 py-2 bg-indigo-50 text-indigo-600 text-xs font-bold rounded-lg hover:bg-indigo-600 hover:text-white transition-all shadow-sm flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" /></svg>
                                {{ t('gen_0390') }}
                            </button>
                            <button type="button" @click="copySequence" class="px-4 py-2 bg-blue-50 text-blue-600 text-xs font-bold rounded-lg hover:bg-blue-600 hover:text-white transition-all shadow-sm flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" /></svg>
                                {{ t('gen_0391') }}
                            </button>
                        </div>
                        <button type="button" @click="showSequenceModal = false" class="px-8 py-2.5 bg-gray-800 text-white font-bold rounded-lg hover:bg-black shadow-lg transition-all">{{ t('gen_0392') }}</button>
                    </div>
                </div>
            </div>
        </component>

        <!-- Ëá™Âä®ÂåπÈÖçÂª∫ËÆÆÂàóË°® -->
        <datalist v-for="(list, key) in suggestions" :key="'list-'+key" :id="'list-'+key">
            <option v-for="item in list" :key="item" :value="item"></option>
        </datalist>
        <datalist id="list-locations">
            <option v-for="loc in uniqueLocations" :key="loc" :value="loc"></option>
        </datalist>
        <datalist id="list-owners">
            <option v-for="m in uniqueHolders" :key="m" :value="m"></option>
        </datalist>

        <!-- ÊâπÈáèÂØºÂÖ•ÂºπÁ™ó -->
        <component is="transition" name="modal">
            <div v-if="showBatchModal" v-cloak class="fixed inset-0 z-50 flex items-center justify-center p-2 bg-black/60 backdrop-blur-md">
                <div v-cloak class="bg-white rounded-2xl shadow-2xl w-full max-w-[98vw] max-h-[96vh] flex flex-col border border-gray-100 overflow-hidden">
                    <div class="px-8 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-2xl">
                        <h3 class="text-xl font-bold text-gray-800 flex items-center gap-3">
                            <span class="w-10 h-10 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" /></svg>
                            </span>
                            ÊâπÈáèËØÜÂà´‰∏éÂØºÂÖ• (Á°ÆËÆ§ËØÜÂà´ÁªìÊûú)
                        </h3>
                        <div class="flex items-center gap-4">
                            <div v-if="isElectron" v-cloak class="flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold border border-green-200">
                                <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                Ê°åÈù¢‰∏ì‰∏öÊ®°Âºè (Â∑≤ÂºÄÂêØÁªùÂØπË∑ØÂæÑÊîØÊåÅ)
                            </div>
                            <div class="text-sm text-gray-500" v-if="batchImportItems">{{ t('gen_0397') }} <span class="text-indigo-600 font-bold">{{ selectedBatchCount }}</span> / {{ batchImportItems.length }} {{ t('gen_0398') }}</div>
                            <button type="button" @click="showBatchModal = false" class="text-gray-400 hover:text-gray-600 transition-colors" :aria-label="t('gen_0392')">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                            </button>
                        </div>
                    </div>

                    <div class="px-8 py-3 bg-green-50 border-b border-green-100 flex items-center justify-between">
                        <div class="flex items-center gap-2 text-green-700 font-bold text-xs">
                            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
                            {{ t('gen_0399') }}
                        </div>
                    </div>

                    <!-- Tabs -->
                    <div class="px-8 py-0 flex border-b border-gray-200 bg-gray-50/50">
                        <button type="button" 
                            @click="batchTab = 'new'" 
                            :class="['px-6 py-3 font-bold text-sm border-b-2 transition-colors flex items-center gap-2', batchTab === 'new' ? 'border-indigo-600 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700']">
                            <span>{{ t('gen_0400') }}</span>
                            <span class="px-2 py-0.5 rounded-full bg-gray-100 text-xs text-gray-600">{{ newBatchCount }}</span>
                        </button>
                        <button type="button" 
                            @click="batchTab = 'update'" 
                            :class="['px-6 py-3 font-bold text-sm border-b-2 transition-colors flex items-center gap-2', batchTab === 'update' ? 'border-amber-500 text-amber-600' : 'border-transparent text-gray-500 hover:text-gray-700']">
                            <span>{{ t('gen_0401') }}</span>
                            <span class="px-2 py-0.5 rounded-full bg-amber-100 text-xs text-amber-600">{{ updateBatchCount }}</span>
                        </button>
                    </div>

                    <div class="flex-1 overflow-auto p-4">
                        <div v-if="batchImportItems.length === 0" class="flex flex-col items-center justify-center py-20 text-gray-400">
                            <div class="w-16 h-16 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin mb-4"></div>
                            <p class="text-lg font-medium animate-pulse">{{ t('gen_0402') }}</p>
                        </div>
                        <table v-else class="min-w-full divide-y divide-gray-200 text-xs">
                            <thead class="bg-gray-50 sticky top-0 z-10">
                                <tr>
                                    <th class="px-4 py-3 text-left w-10">
                                        <input type="checkbox" 
                                            :checked="isBatchAllSelected" 
                                            @change="toggleAllBatchItems($event.target.checked)" 
                                            class="w-4 h-4 rounded border-gray-300">
                                    </th>
                                    <th class="px-4 py-3 text-left font-bold text-gray-500 uppercase min-w-[300px]">{{ t('gen_0137') }}</th>
                                    <th class="px-4 py-3 text-left font-bold text-gray-500 uppercase min-w-[400px]">{{ t('gen_0141') }} (ÁªùÂØπË∑ØÂæÑ)</th>
                                    <th class="px-4 py-3 text-left font-bold text-gray-500 uppercase min-w-[180px]">{{ t('gen_0443') }} (ËΩΩ‰Ωì/Áâ©Áßç/Á±ªÂûã)</th>
                                    <th class="px-4 py-3 text-left font-bold text-gray-500 uppercase min-w-[180px]">Âü∫Âõ†/ÂêØÂä®Â≠ê/Ê†áÁ≠æ</th>
                                    <th class="px-4 py-3 text-left font-bold text-gray-500 uppercase min-w-[150px]">{{ t('gen_0408') }}</th>
                                    <th class="px-4 py-3 text-left font-bold text-gray-500 uppercase min-w-[180px]">‰ΩçÁΩÆ/‰∫∫Âëò/È°πÁõÆ</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr v-for="item in batchImportItems" :key="item.Êñá‰ª∂Âêç" 
                                    v-show="(batchTab === 'new' && !item.isDuplicate) || (batchTab === 'update' && item.isDuplicate)"
                                    :class="['hover:bg-gray-50 transition-colors', item.isDuplicate ? 'bg-amber-50/50' : '']">
                                    <td class="px-4 py-3 text-center"><input type="checkbox" v-model="item.selected" class="w-4 h-4 rounded border-gray-300"></td>
                                    <td class="px-4 py-3">
                                        <textarea v-model="item.Êñá‰ª∂Âêç" rows="2" class="w-full bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none font-bold py-1 resize-none whitespace-pre-wrap leading-tight text-xs"></textarea>
                                        <div v-if="item.isDuplicate" class="text-[9px] text-amber-600 mt-0.5 flex items-center gap-1 font-bold italic">
                                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"/></svg>
                                            {{ t('gen_0411') }}
                                        </div>
                                    </td>
                                    <td class="px-4 py-3">
                                        <input type="text" v-model="item.Ë∑ØÂæÑ" class="w-full bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none text-gray-500 italic py-1" placeholder="ËØ∑Ë°•ÂÖ®ÂÆåÊï¥Ë∑ØÂæÑ...">
                                    </td>
                                    <td class="px-4 py-3 space-y-3">
                                        <!-- ËΩΩ‰ΩìÁ±ªÂûã -->
                                        <div class="space-y-1">
                                            <span class="text-[9px] text-gray-400 block">{{ t('gen_0413') }}</span>
                                            <div class="flex flex-wrap gap-1">
                                                <label v-for="val in item.ËΩΩ‰ΩìÁ±ªÂûã" :key="val.value" class="flex items-center gap-1 px-1.5 py-0.5 bg-purple-50 text-purple-700 rounded border border-purple-100 cursor-pointer hover:bg-purple-100 transition-colors">
                                                    <input type="checkbox" v-model="val.selected" class="w-3 h-3 rounded border-purple-300 text-purple-600">
                                                    <span class="text-[10px]">{{ val.value }}</span>
                                                </label>
                                                <input type="text" placeholder="+" class="w-16 bg-transparent border-b border-gray-200 focus:border-indigo-300 focus:outline-none py-0 text-[10px]"
                                                    v-model="item.ËΩΩ‰ΩìÁ±ªÂûã_new" @keyup.enter="item.ËΩΩ‰ΩìÁ±ªÂûã_new = addBatchItemValue(item, 'ËΩΩ‰ΩìÁ±ªÂûã', item.ËΩΩ‰ΩìÁ±ªÂûã_new)">
                                            </div>
                                        </div>
                                        <!-- Áâ©Áßç -->
                                        <div class="space-y-1">
                                            <span class="text-[9px] text-gray-400 block">{{ t('gen_0415') }}</span>
                                            <div class="flex flex-wrap gap-1">
                                                <label v-for="val in item.Áâ©Áßç" :key="val.value" class="flex items-center gap-1 px-1.5 py-0.5 bg-green-50 text-green-700 rounded border border-green-100 cursor-pointer hover:bg-green-100 transition-colors">
                                                    <input type="checkbox" v-model="val.selected" class="w-3 h-3 rounded border-green-300 text-green-600">
                                                    <span class="text-[10px]">{{ val.value }}</span>
                                                </label>
                                                <input type="text" placeholder="+" class="w-16 bg-transparent border-b border-gray-200 focus:border-indigo-300 focus:outline-none py-0 text-[10px]"
                                                    v-model="item.Áâ©Áßç_new" @keyup.enter="item.Áâ©Áßç_new = addBatchItemValue(item, 'Áâ©Áßç', item.Áâ©Áßç_new)">
                                            </div>
                                        </div>
                                        <!-- ÊèíÂÖ•Á±ªÂûã -->
                                        <div class="space-y-1">
                                            <span class="text-[9px] text-gray-400 block">{{ t('gen_0417') }}</span>
                                            <div class="flex flex-wrap gap-1">
                                                <label v-for="val in item.ÊèíÂÖ•Á±ªÂûã" :key="val.value" class="flex items-center gap-1 px-1.5 py-0.5 bg-blue-50 text-blue-700 rounded border border-blue-100 cursor-pointer hover:bg-blue-100 transition-colors">
                                                    <input type="checkbox" v-model="val.selected" class="w-3 h-3 rounded border-blue-300 text-blue-600">
                                                    <span class="text-[10px]">{{ val.value }}</span>
                                                </label>
                                                <input type="text" placeholder="+" class="w-16 bg-transparent border-b border-gray-200 focus:border-indigo-300 focus:outline-none py-0 text-[10px]"
                                                    v-model="item.ÊèíÂÖ•Á±ªÂûã_new" @keyup.enter="item.ÊèíÂÖ•Á±ªÂûã_new = addBatchItemValue(item, 'ÊèíÂÖ•Á±ªÂûã', item.ÊèíÂÖ•Á±ªÂûã_new)">
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3 space-y-3">
                                        <!-- Èù∂Âü∫Âõ† -->
                                        <div class="space-y-1">
                                            <span class="text-[9px] text-gray-400 block">{{ t('gen_0151') }}</span>
                                            <div class="flex flex-wrap gap-1">
                                                <label v-for="val in item.Èù∂Âü∫Âõ†" :key="val.value" class="flex items-center gap-1 px-1.5 py-0.5 bg-gray-50 text-gray-700 rounded border border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors">
                                                    <input type="checkbox" v-model="val.selected" class="w-3 h-3 rounded border-gray-300 text-indigo-600">
                                                    <span class="text-[10px] font-bold">{{ val.value }}</span>
                                                </label>
                                                <input type="text" placeholder="+" class="w-16 bg-transparent border-b border-gray-200 focus:border-indigo-300 focus:outline-none py-0 text-[10px]"
                                                    v-model="item.Èù∂Âü∫Âõ†_new" @keyup.enter="item.Èù∂Âü∫Âõ†_new = addBatchItemValue(item, 'Èù∂Âü∫Âõ†', item.Èù∂Âü∫Âõ†_new)">
                                            </div>
                                        </div>
                                        <!-- ÂêØÂä®Â≠ê -->
                                        <div class="space-y-1">
                                            <span class="text-[9px] text-gray-400 block">{{ t('gen_0186') }}</span>
                                            <div class="flex flex-wrap gap-1">
                                                <label v-for="val in item.ÂêØÂä®Â≠ê" :key="val.value" class="flex items-center gap-1 px-1.5 py-0.5 bg-gray-50 text-gray-600 rounded border border-gray-100 cursor-pointer hover:bg-gray-100 transition-colors">
                                                    <input type="checkbox" v-model="val.selected" class="w-3 h-3 rounded border-gray-300 text-gray-600">
                                                    <span class="text-[10px]">{{ val.value }}</span>
                                                </label>
                                                <input type="text" placeholder="+" class="w-16 bg-transparent border-b border-gray-200 focus:border-indigo-300 focus:outline-none py-0 text-[10px]"
                                                    v-model="item.ÂêØÂä®Â≠ê_new" @keyup.enter="item.ÂêØÂä®Â≠ê_new = addBatchItemValue(item, 'ÂêØÂä®Â≠ê', item.ÂêØÂä®Â≠ê_new)">
                                            </div>
                                        </div>
                                        <!-- ËõãÁôΩÊ†áÁ≠æ -->
                                        <div class="space-y-1">
                                            <span class="text-[9px] text-gray-400 block">{{ t('gen_0178') }}</span>
                                            <div class="flex flex-wrap gap-1">
                                                <label v-for="val in item.ËõãÁôΩÊ†áÁ≠æ" :key="val.value" class="flex items-center gap-1 px-1.5 py-0.5 bg-amber-50 text-amber-700 rounded border border-amber-100 cursor-pointer hover:bg-amber-100 transition-colors">
                                                    <input type="checkbox" v-model="val.selected" class="w-3 h-3 rounded border-amber-300 text-amber-600">
                                                    <span class="text-[10px]">{{ val.value }}</span>
                                                </label>
                                                <input type="text" placeholder="+" class="w-16 bg-transparent border-b border-gray-200 focus:border-indigo-300 focus:outline-none py-0 text-[10px]"
                                                    v-model="item.ËõãÁôΩÊ†áÁ≠æ_new" @keyup.enter="item.ËõãÁôΩÊ†áÁ≠æ_new = addBatchItemValue(item, 'ËõãÁôΩÊ†áÁ≠æ', item.ËõãÁôΩÊ†áÁ≠æ_new)">
                                            </div>
                                        </div>
                                        <!-- ËçßÂÖâËõãÁôΩ -->
                                        <div class="space-y-1">
                                            <span class="text-[9px] text-gray-400 block">{{ t('gen_0182') }}</span>
                                            <div class="flex flex-wrap gap-1">
                                                <label v-for="val in item.ËçßÂÖâËõãÁôΩ" :key="val.value" class="flex items-center gap-1 px-1.5 py-0.5 bg-emerald-50 text-emerald-700 rounded border border-emerald-100 cursor-pointer hover:bg-emerald-100 transition-colors">
                                                    <input type="checkbox" v-model="val.selected" class="w-3 h-3 rounded border-emerald-300 text-emerald-600">
                                                    <span class="text-[10px]">{{ val.value }}</span>
                                                </label>
                                                <input type="text" placeholder="+" class="w-16 bg-transparent border-b border-gray-200 focus:border-indigo-300 focus:outline-none py-0 text-[10px]"
                                                    v-model="item.ËçßÂÖâËõãÁôΩ_new" @keyup.enter="item.ËçßÂÖâËõãÁôΩ_new = addBatchItemValue(item, 'ËçßÂÖâËõãÁôΩ', item.ËçßÂÖâËõãÁôΩ_new)">
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3 space-y-3">
                                        <!-- Â§ßËÇ†ÊùÜËèåÊäóÊÄß -->
                                        <div class="space-y-1">
                                            <span class="text-[9px] text-gray-400 block">{{ t('gen_0423') }}</span>
                                            <div class="flex flex-wrap gap-1">
                                                <label v-for="val in item.Â§ßËÇ†ÊùÜËèåÊäóÊÄß" :key="val.value" class="flex items-center gap-1 px-1.5 py-0.5 bg-orange-50 text-orange-700 rounded border border-orange-100 cursor-pointer hover:bg-orange-100 transition-colors">
                                                    <input type="checkbox" v-model="val.selected" class="w-3 h-3 rounded border-orange-300 text-orange-600">
                                                    <span class="text-[10px]">{{ val.value }}</span>
                                                </label>
                                                <input type="text" placeholder="+" class="w-16 bg-transparent border-b border-gray-200 focus:border-indigo-300 focus:outline-none py-0 text-[10px]"
                                                    v-model="item.Â§ßËÇ†ÊùÜËèåÊäóÊÄß_new" @keyup.enter="item.Â§ßËÇ†ÊùÜËèåÊäóÊÄß_new = addBatchItemValue(item, 'Â§ßËÇ†ÊùÜËèåÊäóÊÄß', item.Â§ßËÇ†ÊùÜËèåÊäóÊÄß_new)">
                                            </div>
                                        </div>
                                        <!-- Âì∫‰π≥Âä®Áâ©ÊäóÊÄß -->
                                        <div class="space-y-1">
                                            <span class="text-[9px] text-gray-400 block">{{ t('gen_0425') }}</span>
                                            <div class="flex flex-wrap gap-1">
                                                <label v-for="val in item.Âì∫‰π≥Âä®Áâ©ÊäóÊÄß" :key="val.value" class="flex items-center gap-1 px-1.5 py-0.5 bg-blue-50 text-blue-700 rounded border border-blue-100 cursor-pointer hover:bg-blue-100 transition-colors">
                                                    <input type="checkbox" v-model="val.selected" class="w-3 h-3 rounded border-blue-300 text-blue-600">
                                                    <span class="text-[10px]">{{ val.value }}</span>
                                                </label>
                                                <input type="text" placeholder="+" class="w-16 bg-transparent border-b border-gray-200 focus:border-indigo-300 focus:outline-none py-0 text-[10px]"
                                                    v-model="item.Âì∫‰π≥Âä®Áâ©ÊäóÊÄß_new" @keyup.enter="item.Âì∫‰π≥Âä®Áâ©ÊäóÊÄß_new = addBatchItemValue(item, 'Âì∫‰π≥Âä®Áâ©ÊäóÊÄß', item.Âì∫‰π≥Âä®Áâ©ÊäóÊÄß_new)">
                                            </div>
                                        </div>
                                        <!-- ÂõõÁéØÁ¥†ËØ±ÂØº -->
                                        <div class="space-y-1">
                                            <span class="text-[9px] text-gray-400 block">{{ t('gen_0427') }}</span>
                                            <div class="flex flex-wrap gap-1">
                                                <label v-for="val in item.ÂõõÁéØÁ¥†ËØ±ÂØº" :key="val.value" class="flex items-center gap-1 px-1.5 py-0.5 bg-red-50 text-red-700 rounded border border-red-100 cursor-pointer hover:bg-red-100 transition-colors">
                                                    <input type="checkbox" v-model="val.selected" class="w-3 h-3 rounded border-red-300 text-red-600">
                                                    <span class="text-[10px]">{{ val.value }}</span>
                                                </label>
                                                <input type="text" placeholder="+" class="w-16 bg-transparent border-b border-gray-200 focus:border-indigo-300 focus:outline-none py-0 text-[10px]"
                                                    v-model="item.ÂõõÁéØÁ¥†ËØ±ÂØº_new" @keyup.enter="item.ÂõõÁéØÁ¥†ËØ±ÂØº_new = addBatchItemValue(item, 'ÂõõÁéØÁ¥†ËØ±ÂØº', item.ÂõõÁéØÁ¥†ËØ±ÂØº_new)">
                                            </div>
                                        </div>
                                        <!-- Á™ÅÂèò -->
                                        <div class="space-y-1">
                                            <span class="text-[9px] text-gray-400 block">{{ t('gen_0190') }}</span>
                                            <div class="flex flex-wrap gap-1">
                                                <label v-for="val in item.Á™ÅÂèò" :key="val.value" class="flex items-center gap-1 px-1.5 py-0.5 bg-rose-50 text-rose-700 rounded border border-rose-100 cursor-pointer hover:bg-rose-100 transition-colors">
                                                    <input type="checkbox" v-model="val.selected" class="w-3 h-3 rounded border-rose-300 text-rose-600">
                                                    <span class="text-[10px]">{{ val.value }}</span>
                                                </label>
                                                <input type="text" placeholder="+" class="w-16 bg-transparent border-b border-gray-200 focus:border-indigo-300 focus:outline-none py-0 text-[10px]"
                                                    v-model="item.Á™ÅÂèò_new" @keyup.enter="item.Á™ÅÂèò_new = addBatchItemValue(item, 'Á™ÅÂèò', item.Á™ÅÂèò_new)">
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3 space-y-1">
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-12 shrink-0">{{ t('gen_0430') }}</span><input type="text" v-model="item.‰øùÂ≠ò‰ΩçÁΩÆ" list="list-locations" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-gray-600"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-12 shrink-0">{{ t('gen_0432') }}</span><input type="text" v-model="item.ÊåÅÊúâ‰∫∫" list="list-owners" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-gray-600"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-12 shrink-0">{{ t('gen_0109') }}</span>
                                            <select v-model="item.È°πÁõÆ" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-xs">
                                                <option value="">(Êó†)</option>
                                                <option v-for="proj in projects" :key="proj.id" :value="proj.id">{{ proj.name }}</option>
                                            </select>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="px-8 py-6 border-t border-gray-100 bg-gray-50 flex justify-between items-center rounded-b-2xl">
                        <div class="text-xs text-gray-400 max-w-md">
                            <span class="font-bold text-gray-500">{{ t('gen_0436') }}</span> ÊÇ®ÂèØ‰ª•Áõ¥Êé•Âú®Ë°®Ê†º‰∏≠‰øÆÊîπËØÜÂà´ÁªìÊûú„ÄÇÂØπ‰∫éÈáçÂ§çÈ°πÔºåÁ≥ªÁªüÈªòËÆ§‰∏çÂãæÈÄâÂØºÂÖ•„ÄÇ
                        </div>
                        <div class="flex gap-3">
                            <button type="button" @click="showBatchModal = false" class="px-6 py-2.5 border border-gray-300 text-gray-600 font-bold rounded-xl hover:bg-gray-100 transition-all">{{ t('gen_0239') }}</button>
                            <button v-if="batchTab === 'new'" type="button" @click="saveBatchImport" class="px-10 py-2.5 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition-all flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
                                {{ t('gen_0439') }}
                            </button>
                            <button v-if="batchTab === 'update'" type="button" @click="saveBatchUpdate" class="px-10 py-2.5 bg-amber-500 text-white font-bold rounded-xl hover:bg-amber-600 shadow-lg shadow-amber-200 transition-all flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                                {{ t('gen_0440') }}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </component>

        <!-- Batch Paste Preview Modal -->
        <component is="transition" name="modal">
            <div v-if="showBatchPreview" v-cloak class="fixed inset-0 z-[60] flex items-center justify-center p-8 bg-black/50 backdrop-blur-sm">
                <div class="bg-white w-full max-w-7xl max-h-full rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-fade-in-up">
                    <div class="px-8 py-6 border-b border-gray-100 flex items-center justify-between bg-gradient-to-r from-indigo-50 to-white">
                        <div>
                            <h3 class="text-2xl font-black text-gray-800">{{ t('gen_0441') }}</h3>
                            <p class="text-sm text-gray-500 mt-1">{{ t('gen_0442') }}</p>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-xs font-bold">
                                ÂÖ± {{ batchPreviewList.length }} {{ t('gen_0398') }}
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-auto p-0">
                        <table class="min-w-full divide-y divide-gray-200 text-xs">
                            <thead class="bg-gray-50 sticky top-0 z-10">
                                <tr>
                                    <th class="px-4 py-3 text-left font-bold text-gray-500 uppercase">{{ t('gen_0137') }}</th>
                                    <th class="px-4 py-3 text-left font-bold text-gray-500 uppercase">{{ t('gen_0443') }}</th>
                                    <th class="px-4 py-3 text-left font-bold text-gray-500 uppercase">Âü∫Âõ†/ÂêØÂä®Â≠ê/Ê†áÁ≠æ</th>
                                    <th class="px-4 py-3 text-left font-bold text-gray-500 uppercase">{{ t('gen_0408') }}</th>
                                    <th class="px-4 py-3 text-left font-bold text-gray-500 uppercase">‰ΩçÁΩÆ/‰∫∫Âëò/È°πÁõÆ</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100 bg-white">
                                <tr v-for="(item, index) in batchPreviewList" :key="index" class="hover:bg-gray-50">
                                    <td class="px-4 py-3 align-top">
                                        <input type="text" v-model="item.Êñá‰ª∂Âêç" class="w-full bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none font-bold py-1">
                                    </td>
                                    <td class="px-4 py-3 space-y-1 align-top">
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-8 shrink-0">{{ t('gen_0413') }}</span><input type="text" v-model="item.ËΩΩ‰ΩìÁ±ªÂûã" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-purple-600 font-medium"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-8 shrink-0">{{ t('gen_0415') }}</span><input type="text" v-model="item.Áâ©Áßç" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-green-600 font-medium"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-8 shrink-0">{{ t('gen_0417') }}</span><input type="text" v-model="item.ÊèíÂÖ•Á±ªÂûã" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-blue-500 font-medium"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-8 shrink-0">{{ t('gen_0159') }}</span><input type="text" v-model="item.ÂäüËÉΩ" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-gray-600"></div>
                                    </td>
                                    <td class="px-4 py-3 space-y-1 align-top">
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-10 shrink-0">{{ t('gen_0151') }}</span><input type="text" v-model="item.Èù∂Âü∫Âõ†" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 font-bold"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-10 shrink-0">{{ t('gen_0186') }}</span><input type="text" v-model="item.ÂêØÂä®Â≠ê" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-gray-600"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-10 shrink-0">{{ t('gen_0178') }}</span><input type="text" v-model="item.ËõãÁôΩÊ†áÁ≠æ" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-amber-600"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-10 shrink-0">{{ t('gen_0182') }}</span><input type="text" v-model="item.ËçßÂÖâËõãÁôΩ" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-emerald-500"></div>
                                    </td>
                                    <td class="px-4 py-3 space-y-1 align-top">
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-10 shrink-0">{{ t('gen_0445') }}</span><input type="text" v-model="item.Â§ßËÇ†ÊùÜËèåÊäóÊÄß" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-orange-600"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-10 shrink-0">{{ t('gen_0446') }}</span><input type="text" v-model="item.Âì∫‰π≥Âä®Áâ©ÊäóÊÄß" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-blue-600"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-10 shrink-0">{{ t('gen_0427') }}</span><input type="text" v-model="item.ÂõõÁéØÁ¥†ËØ±ÂØº" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-red-500"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-10 shrink-0">{{ t('gen_0190') }}</span><input type="text" v-model="item.Á™ÅÂèò" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-rose-500"></div>
                                    </td>
                                    <td class="px-4 py-3 space-y-1 align-top">
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-8 shrink-0">{{ t('gen_0430') }}</span><input type="text" v-model="item.‰øùÂ≠ò‰ΩçÁΩÆ" list="list-locations" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-gray-600"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-8 shrink-0">{{ t('gen_0432') }}</span><input type="text" v-model="item.ÊåÅÊúâ‰∫∫" list="list-owners" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-gray-600"></div>
                                        <div class="flex gap-1"><span class="text-[9px] text-gray-400 w-8 shrink-0">{{ t('gen_0109') }}</span>
                                            <select v-model="item.È°πÁõÆ" class="flex-1 bg-transparent border-b border-transparent focus:border-indigo-300 focus:outline-none py-0 text-xs">
                                                <option value="">(Êó†)</option>
                                                <option v-for="proj in (projectManager && projectManager.projects ? projectManager.projects : [])" :key="proj.id" :value="proj.id">{{ proj.name }}</option>
                                            </select>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="px-8 py-6 border-t border-gray-100 bg-gray-50 flex justify-end gap-3">
                        <button type="button" @click="cancelBatchImport" class="px-6 py-2.5 border border-gray-300 text-gray-600 font-bold rounded-xl hover:bg-gray-100 transition-all">{{ t('gen_0239') }}</button>
                        <button type="button" @click="confirmBatchImport" class="px-10 py-2.5 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition-all">{{ t('gen_0447') }}</button>
                    </div>
                </div>
            </div>
        </component>

        <!-- Á≥ªÁªüÊó•ÂøóÂºπÁ™ó -->
        <component is="transition" name="modal">
            <div v-if="showLogModal" v-cloak class="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                <div class="bg-slate-900 rounded-2xl shadow-2xl w-full max-w-4xl h-[80vh] flex flex-col border border-slate-700">
                    <div class="px-8 py-6 border-b border-slate-700 flex justify-between items-center bg-slate-800 rounded-t-2xl">
                        <h3 class="text-xl font-bold text-white flex items-center gap-3">
                            <span class="w-8 h-8 bg-blue-500/20 text-blue-400 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                            </span>
                            {{ t('gen_0449') }}
                        </h3>
                        <div class="flex gap-2">
                            <button type="button" @click="systemLogs.splice(0)" class="px-3 py-1.5 text-xs text-slate-400 hover:text-white hover:bg-slate-700 rounded-md transition-all">{{ t('gen_0450') }}</button>
                            <button type="button" @click="showLogModal = false" class="text-slate-400 hover:text-white transition-colors" :aria-label="t('gen_0392')">
                                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                            </button>
                        </div>
                    </div>
                    <div class="flex-1 overflow-auto p-4">
                        <div v-if="systemLogs.length === 0" class="text-slate-500 italic text-center py-20">{{ t('gen_0451') }}</div>
                        <div v-for="(log, idx) in systemLogs" :key="idx" :class="['flex gap-3 px-3 py-1.5 rounded border-l-4 transition-colors', log.type === 'error' ? 'bg-red-500/10 border-red-500 text-red-400' : log.type === 'warn' ? 'bg-amber-500/10 border-amber-500 text-amber-400' : 'bg-slate-800/50 border-blue-500 text-slate-300 hover:bg-slate-800']">
                            <span class="text-slate-500 whitespace-nowrap">[{{ log.time }}]</span>
                            <span :class="['font-bold px-1 rounded uppercase text-[10px]', log.type === 'error' ? 'bg-red-500 text-white' : log.type === 'warn' ? 'bg-amber-500 text-black' : 'bg-blue-500 text-white']">{{ log.type }}</span>
                            <span class="break-all">{{ log.msg }}</span>
                        </div>
                    </div>
                    <div class="px-8 py-4 border-t border-slate-700 bg-slate-800/50 rounded-b-2xl text-xs text-slate-500 flex justify-between items-center">
                        <span>{{ t('gen_0452') }}</span>
                        <span>ÂÖ± {{ systemLogs.length }} {{ t('gen_0453') }}</span>
                    </div>
                </div>
            </div>
        </component>

        <!-- UniProt ÊêúÁ¥¢ÂºπÁ™ó -->
        <component is="transition" name="modal">
            <div v-if="showUniProtModal" v-cloak class="fixed inset-0 z-[80] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl flex flex-col border border-gray-100 overflow-hidden max-h-[90vh]">
                    <!-- Header -->
                    <div class="px-6 py-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center">
                        <h3 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                            <span class="w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center font-black text-xs">UP</span>
                            UniProt {{ t('gen_0248') }} <span class="text-blue-600">{{ uniProtModalData.targetGene }}</span>
                        </h3>
                        <button type="button" @click="closeUniProtModal" class="text-gray-400 hover:text-gray-600 transition-colors">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                        </button>
                    </div>
                    
                    <!-- Content -->
                    <div class="p-6 overflow-y-auto">
                        <!-- Loading -->
                        <div v-if="uniProtModalData.loading" class="flex flex-col items-center justify-center py-12 text-gray-500">
                            <div class="w-10 h-10 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mb-3"></div>
                            <p class="text-sm font-bold">Ê≠£Âú®ÊêúÁ¥¢ UniProt Êï∞ÊçÆÂ∫ì...</p>
                        </div>

                        <!-- Error -->
                        <div v-else-if="uniProtModalData.error" class="bg-red-50 border border-red-100 rounded-xl p-4 flex items-start gap-3">
                            <svg class="w-5 h-5 text-red-500 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            <div>
                                <h4 class="text-sm font-bold text-red-700">{{ t('gen_0455') }}</h4>
                                <p class="text-xs text-red-600 mt-1">{{ uniProtModalData.error }}</p>
                            </div>
                        </div>

                        <!-- Results -->
                        <div v-else-if="uniProtModalData.result" class="space-y-6">
                            <!-- Result Header -->
                            <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h4 class="text-lg font-bold text-gray-800">{{ uniProtModalData.result.name }}</h4>
                                        <div class="flex items-center gap-2 mt-1 text-sm text-gray-600">
                                            <span class="bg-white px-2 py-0.5 rounded border border-blue-200 text-blue-600 font-mono text-xs">{{ uniProtModalData.result.uniprotId }}</span>
                                            <span class="italic">{{ uniProtModalData.result.organism }}</span>
                                        </div>
                                    </div>
                                    <a :href="uniProtModalData.result.link" @click.prevent="openExternalLink(uniProtModalData.result.link)" class="text-xs text-blue-600 hover:underline flex items-center gap-1">
                                        UniProtÂÆòÁΩë
                                        <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" /></svg>
                                    </a>
                                </div>
                            </div>

                            <!-- Details -->
                            <div class="space-y-4">
                                <div v-if="uniProtModalData.result.functions && uniProtModalData.result.functions.length > 0">
                                    <h5 class="text-sm font-bold text-gray-700 mb-1">{{ t('gen_0251') }}</h5>
                                    <ul class="text-sm text-gray-600 leading-relaxed bg-gray-50 p-3 rounded-lg border border-gray-100 list-disc list-inside space-y-2">
                                        <li v-for="(func, idx) in uniProtModalData.result.functions" :key="idx" v-html="func" class="break-words"></li>
                                    </ul>
                                </div>
                                <div v-else-if="uniProtModalData.result.function">
                                    <h5 class="text-sm font-bold text-gray-700 mb-1">{{ t('gen_0251') }}</h5>
                                    <p class="text-sm text-gray-600 leading-relaxed bg-gray-50 p-3 rounded-lg border border-gray-100">{{ uniProtModalData.result.function }}</p>
                                </div>
                                <div v-if="uniProtModalData.result.subcellularLocation && uniProtModalData.result.subcellularLocation !== 'Êó†ÁªÜËÉûÂÆö‰Ωç‰ø°ÊÅØ'">
                                    <h5 class="text-sm font-bold text-gray-700 mb-1">{{ t('gen_0457') }}</h5>
                                    <p class="text-sm text-gray-600 bg-gray-50 p-2 rounded border border-gray-100">{{ uniProtModalData.result.subcellularLocation }}</p>
                                </div>
                                <div class="flex gap-6 flex-wrap">
                                    <div v-if="uniProtModalData.result.mass">
                                        <h5 class="text-sm font-bold text-gray-700 mb-1">{{ t('gen_0252') }}</h5>
                                        <p class="text-sm text-gray-900 font-mono">{{ uniProtModalData.result.mass }} Da</p>
                                    </div>
                                    <div v-if="uniProtModalData.result.length">
                                        <h5 class="text-sm font-bold text-gray-700 mb-1">{{ t('gen_0253') }}</h5>
                                        <p class="text-sm text-gray-900 font-mono">{{ uniProtModalData.result.length }} aa</p>
                                    </div>
                                    <div v-if="uniProtModalData.result.flyBaseId">
                                        <h5 class="text-sm font-bold text-gray-700 mb-1">FlyBase</h5>
                                        <a :href="'https://flybase.org/reports/' + uniProtModalData.result.flyBaseId" @click.prevent="openExternalLink('https://flybase.org/reports/' + uniProtModalData.result.flyBaseId)" class="text-sm text-blue-600 hover:underline font-mono">{{ uniProtModalData.result.flyBaseId }}</a>
                                    </div>
                                    <div v-if="uniProtModalData.result.refSeqId">
                                        <h5 class="text-sm font-bold text-gray-700 mb-1">RefSeq</h5>
                                        <a :href="'https://www.ncbi.nlm.nih.gov/nuccore/' + uniProtModalData.result.refSeqId" @click.prevent="openExternalLink('https://www.ncbi.nlm.nih.gov/nuccore/' + uniProtModalData.result.refSeqId)" class="text-sm text-blue-600 hover:underline font-mono">{{ uniProtModalData.result.refSeqId }}</a>
                                    </div>
                                    <div v-if="uniProtModalData.result.stringId">
                                        <h5 class="text-sm font-bold text-gray-700 mb-1">STRING</h5>
                                        <a :href="'https://string-db.org/network/' + uniProtModalData.result.stringId" @click.prevent="openExternalLink('https://string-db.org/network/' + uniProtModalData.result.stringId)" class="text-sm text-blue-600 hover:underline font-mono">{{ uniProtModalData.result.stringId }}</a>
                                    </div>
                                </div>
                                <div v-if="uniProtModalData.result.sequence">
                                    <h5 class="text-sm font-bold text-gray-700 mb-1">{{ t('gen_0254') }}</h5>
                                    <div class="bg-gray-800 text-gray-300 font-mono text-xs p-3 rounded-lg break-all max-h-32 overflow-y-auto select-all">
                                        {{ uniProtModalData.result.sequence }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Empty State (No Results) -->
                         <div v-else class="text-center py-12 text-gray-500">
                            <p class="text-sm">{{ t('gen_0458') }}</p>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div v-if="uniProtModalData.result && uniProtModalData.targetPlasmid" class="px-6 py-4 border-t border-gray-100 bg-gray-50 flex justify-end gap-3">
                         <button type="button" @click="closeUniProtModal" class="px-4 py-2 border border-gray-300 text-gray-600 font-bold rounded-lg hover:bg-gray-100 transition-all">{{ t('gen_0239') }}</button>
                        <button type="button" @click="applyUniProtData" class="px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-md transition-all flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
                            Â°´ÂÖ•Êï∞ÊçÆÂà∞ "{{ uniProtModalData.targetPlasmid.Êñá‰ª∂Âêç }}"
                        </button>
                    </div>
                </div>
            </div>
        </component>

        <!-- CSV ÂØºÂá∫ËÆæÁΩÆÂºπÁ™ó -->
        <component is="transition" name="modal">
            <div v-if="showExportModal" v-cloak class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                <div v-cloak class="bg-white rounded-2xl shadow-2xl w-full max-w-md flex flex-col border border-gray-100 overflow-hidden">
                    <div class="px-8 py-6 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                        <h3 class="text-xl font-bold text-gray-800 flex items-center gap-3">
                            <span class="w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2m3.293-7.707a1 1 0 011.414 0L9 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" /></svg>
                            </span>
                            CSV {{ t('gen_0460') }}
                        </h3>
                        <button type="button" @click="showExportModal = false" class="text-gray-400 hover:text-gray-600 transition-colors" :aria-label="t('gen_0392')">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                        </button>
                    </div>
                    <div class="p-8">
                        <div class="flex justify-between items-center mb-4">
                            <label class="block text-sm font-bold text-gray-700">{{ t('gen_0461') }}</label>
                            <div class="flex gap-2">
                                <button type="button" @click="toggleAllExportFields(true)" class="text-xs text-blue-600 hover:underline">{{ t('gen_0462') }}</button>
                                <button type="button" @click="toggleAllExportFields(false)" class="text-xs text-gray-400 hover:underline">{{ t('gen_0463') }}</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3 max-h-[40vh] overflow-y-auto pr-2 scrollbar-thin">
                            <label v-for="field in exportFields" :key="field.id" class="flex items-center gap-3 p-3 border border-gray-100 rounded-xl hover:bg-blue-50 cursor-pointer transition-all group">
                                <input type="checkbox" v-model="field.selected" class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                                <span class="text-sm text-gray-700 group-hover:text-blue-700 transition-colors">{{ field.label }}</span>
                            </label>
                        </div>
                        <p class="text-[10px] text-gray-400 mt-4 italic text-center" v-if="filteredPlasmids">{{ t('gen_0464') }} {{ filteredPlasmids.length }} {{ t('gen_0398') }}</p>
                    </div>
                    <div class="px-8 py-6 border-t border-gray-100 bg-gray-50 flex justify-end gap-3">
                        <button type="button" @click="showExportModal = false" class="px-6 py-2.5 border border-gray-300 text-gray-600 font-bold rounded-xl hover:bg-gray-100 transition-all">{{ t('gen_0239') }}</button>
                        <button type="button" @click="downloadCSV" class="px-8 py-2.5 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center gap-2 btn-scale">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>
                            {{ t('gen_0465') }}
                        </button>
                    </div>
                </div>
            </div>
        </component>

<!-- Duplicate Modal Removed -->

        <!-- Toast ÊèêÁ§∫ -->
        <div id="toast" class="fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-gray-800/95 text-white px-8 py-4 rounded-2xl shadow-2xl text-sm font-bold transition-all duration-300 opacity-0 pointer-events-none z-[100] flex items-center gap-3 border border-gray-700">
            <svg class="w-5 h-5 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
            <span id="toast-text">{{ t('gen_0467') }}</span>
        </div>
    </div>

    <!-- Á≥ªÁªüÂàùÂßãÂåñÂä†ËΩΩÂ±Ç (Vue ÊåÇËΩΩÂâçÂèØËßÅ) -->
    <div class="init-loader" id="init-loader">
        <div class="w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mb-4"></div>
        <div class="text-center">
            <p class="text-gray-500 font-bold animate-pulse text-lg">{{ t('gen_0469') }}</p>
            <p class="text-gray-400 text-sm mt-1">{{ t('gen_0470') }}</p>
            <p class="text-[10px] text-gray-400 mt-4 opacity-50">{{ t('gen_0471') }} data/app_debug.log</p>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/services/uniprotService.js"></script>
    <script src="js/recognition.js"></script>
    <script src="js/data-service.js"></script>
    <script src="js/project-window.js"></script>
    <script src="js/db-manager.js"></script>
    <script src="js/batch-logic.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
