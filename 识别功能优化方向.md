# 识别功能优化方向

> 创建时间：2026-02-04

---

## 现有识别逻辑

```
文件名 → 路径识别 → 正则匹配 → NLP提取 → 兜底识别 → 结果
```

---

## 可优化方向

### 1. 🔮 功能自动推断

**问题**：无法从文件名判断"功能"（RNAi敲降 / CRISPR敲除 / 过表达）

**方案**：根据载体+插入类型推断

```
推断规则：
├─ pLKO + shRNA     → RNAi敲降
├─ pLKO + sgRNA     → CRISPR敲除
├─ pCDH/cDNA + ORF  → 过表达-蛋白
├─ pHA-Myc + cDNA   → 过表达-蛋白
├─ pUAST + shRNA    → RNAi敲降 (果蝇)
└─ pAc5 + shRNA     → RNAi敲降 (果蝇)
```

---

### 2. 💊 抗性自动推断

**问题**：很多质粒文件名不包含抗性信息

**方案**：根据载体类型推断常见抗性

```
常见抗性组合：
├─ pLKO     → 大肠杆菌:AmpR, 哺乳动物:Puromycin
├─ pCDH     → 大肠杆菌:AmpR, 哺乳动物:NeoR
├─ pcDNA3.1 → 大肠杆菌:AmpR, 哺乳动物:NeoR
├─ pUAST    → 大肠杆菌:AmpR
└─ pET      → 大肠杆菌:AmpR
```

---

### 3. 🧠 学习功能

**问题**：用户手动修改识别结果后，下次遇到类似文件还是识别错误

**方案**：记录用户修改，自动学习

```
流程：
1. 用户导入 "xxx.dna" → 识别为 [shRNA]
2. 用户修改为 [sgRNA] → 系统记录：(文件名模式, 原识别, 用户修正)
3. 下次遇到类似文件 → 应用学习规则
```

---

### 4. 📝 描述自动生成

**问题**：描述字段为空

**方案**：根据识别的字段自动生成描述

```
生成规则：
├─ pLKO RNAi敲降 靶:TIA1, 标签:GFP
├─ pCDH过表达 靶:GAPDH, 标签:3×FLAG
└─ CRISPR-KO 靶:TP53, 方式:sgRNA
```

---

### 5. 🎯 模糊匹配

**问题**：拼写错误无法识别

**方案**：Levenshtein 距离 / 相似度匹配

```
示例：
├─ 文件名：pLKO.1 TRC EGFP-T1A1-shRNA.dna
│   识别为：TIA1 (即使拼写成 T1A1)
│
├─ 关键词：EGFP
│   能匹配：EGFP, EGFP-2, eGFP (大小写/变体)
│
└─ 关键词：3×FLAG
│   能匹配：3xFlag, 3XFLAG, 3-FLAG
```

---

### 6. 🧬 物种从基因名推断

**问题**：物种识别不准确

**方案**：根据靶基因推断物种

```
基因-物种映射：
├─ 人基因 → TP53, GAPDH, ACTB, ...  → 物种:人
├─ 小鼠基因 → Trp53, Gapdh, Actb, ... → 物种:小鼠
├─ 大鼠基因 → Trp53, ...              → 物种:大鼠
└─ 如果基因首字母大写/小写规则匹配 → 推断物种
```

---

### 7. 📦 批量导入交叉验证

**问题**：导入多个质粒时，没有利用彼此的信息

**方案**：批量导入时互相参考

```
场景：
导入 10 个质粒，其中 8 个识别为"课题X"
→ 建议：是否将其他 2 个也标记为"课题X"？
```

---

### 8. ❓ 未知词汇处理

**问题**：遇到不认识的名词就跳过

**方案**：识别为"未知"并让用户确认

```
识别结果：
├─ pLKO        → 载体类型:pLKO (✅ 确认)
├─ EGFP-TIA1   → 靶基因:? (❓ 未知词汇，请确认是否正确)
└─ shRNA       → 插入类型:shRNA (✅ 确认)
```

---

## 优先级建议

| 优化项 | 优先级 | 难度 | 效果 |
|--------|--------|------|------|
| 功能自动推断 | P0 | 低 | 高 |
| 抗性自动推断 | P0 | 低 | 中 |
| 物种从基因推断 | P1 | 中 | 中 |
| 描述自动生成 | P1 | 低 | 中 |
| 学习功能 | P2 | 高 | 高 |
| 模糊匹配 | P2 | 中 | 中 |
| 未知词汇确认 | P2 | 中 | 中 |
| 批量交叉验证 | P3 | 高 | 中 |

---

## 请选择

你觉得哪些方向值得做？
1. **功能自动推断** - 根据载体+插入类型推断 RNAi/CRISPR/过表达
2. **抗性自动推断** - 根据载体类型补全抗性
3. **物种推断** - 根据基因名推断物种
4. **学习功能** - 用户修改后自动记住
5. **描述生成** - 自动生成描述文本
